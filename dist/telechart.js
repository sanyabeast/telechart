/* @sanyabeast */
var t,e;t=window,e=function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){var o={"./canvas.html":1,"./plot.html":2,"./telechart.html":3};function r(t){var e=i(t);return n(e)}function i(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=0},function(t,e){t.exports='<canvas class="telechart-canvas fit-width fit-height"></canvas>'},function(t,e){t.exports='<div \r\n\tclass="telechart-plot pos-relative fit-width fit-height"\r\n\t$events="drag zoom click doubletap pan"\r\n\t$ref="dom"\r\n>\r\n\t<div \r\n\t\tclass="canvas-wrapper pos-absolute fit-width fit-height"\r\n\t\t$ref="canvas-wrapper"\r\n\t></div>\r\n\t<div class="dom-layer pos-absolute fit-width fit-height"></div>\r\n</div>'},function(t,e){t.exports='<div \r\n\tclass="telechart flex-column fit-width fit-height"\r\n\t$ref="telechart"\r\n\t$css="modifiers telechart"\r\n>\r\n\t<div \r\n\t\tclass="major-plot-wrapper fit-width"\r\n\t\t$ref="major-plot-wrapper"\r\n\t></div>\r\n\t<div \r\n\t\tclass="panorama-plot-wrapper fit-width"\r\n\t\t$ref="panorama-plot-wrapper"\r\n\t></div>\r\n\t<div class="added-lines flex-row fit-width flex-grow"></div>\r\n</div>'},function(t,e,n){var o={"./modifiers.css":5,"./telechart.css":6};function r(t){var e=i(t);return n(e)}function i(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id=4},function(t,e){t.exports=".flex-row \t\t\t{ display: flex; flex-direction: row; }\r\n.flex-column \t\t{ display: flex; flex-direction: column; }\r\n.flex-j-center \t\t{ justify-content: center; }\r\n.flex-a-center \t\t{ align-items: : center; }\r\n.flex-grow\t\t\t{ flex-grow: 1 }\r\n.flex-no-shrink     { flex-shrink: 0 }\r\n\r\n.fit-width\t\t\t{ width: 100%; }\r\n.fit-height \t\t{ height: 100%; }\r\n.border-box \t\t{ box-sizing: border-box; }\r\n\r\n.pos-absolute \t\t{ position: absolute; left: 0; top: 0; }\r\n.pos-relative \t\t{ position: relative; }"},function(t,e){t.exports=".telechart {\r\n\tborder: 1px solid black;\r\n\tuser-select: none;\r\n\tbackground-color: #fff;\r\n}\r\n\r\n.telechart .major-plot-wrapper {\r\n\theight: 50%;\r\n\tborder-bottom: 1px solid black;\r\n}\r\n\r\n.telechart .panorama-plot-wrapper {\r\n\theight: 15%;\r\n\tborder-bottom: 1px solid black;\r\n}\r\n\r\n"},function(t,e,n){function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e);var u=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),u=1;u<e;u++)n[u-1]=arguments[u];var s=function(e){function u(){var t,e,a,s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var l=arguments.length,f=new Array(l),p=0;p<l;p++)f[p]=arguments[p];return a=this,s=(t=r(u)).call.apply(t,[this].concat(f)),e=!s||"object"!==o(s)&&"function"!=typeof s?i(a):s,n.forEach(function(t){c(i(e),new t)}),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(u,t),u}(),c=function(t,e){Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e)).forEach(function(n){if(!n.match(/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length|\$name|\$prototype|\$\$id|extend|\$constructor)$/))try{Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}catch(t){$clog(t)}})};return n.forEach(function(t){c(s.prototype,t.prototype),c(s,t)}),s};var s=function t(e,n,o,r){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=r||"",this.events=[],d.loopCollection(o,function(t,o){e.on(t,function(e){n.emit(r+t,e)}),i.events.push(r+t)})};function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.setMultiple(e)}var e,n,o;return e=t,(n=[{key:"setMultiple",value:function(t){var e=this;d.loopCollection(t,function(t,n){e[n]=t})}}])&&c(e.prototype,n),o&&c(e,o),t}();function f(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=document.createElement("canvas").getContext("2d"),y=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,"static",void 0)}var e,n,o;return e=t,o=[{key:"loopCollection",value:function(t,e){if(Array.isArray(t))for(var n=0,o=t.length;n<o&&!e(t[n],n,t);n++);else for(var r in t)if(e(t[r],r,t))break}},{key:"loop",value:function(t,e,n,o,r){if(o)for(var i=t,a=0;i<e&&!r(i,a);i+=n)a++;else for(i=t,a=0;i<=e&&!r(i,a);i+=n)a++}},{key:"generateRandomString",value:function(t,e){for(var n="";n.length<e;)n+=Math.random().toString(32).substring(3,12);return n=n.substring(0,e),"".concat(t,"-").concat(n)}},{key:"assignValues",value:function(t,e){this.loopCollection(e,function(e,n){t[n]=e})}},{key:"parseHTML",value:function(t){var e=document.createElement("div");return e.innerHTML=t,e.children[0]}},{key:"injectCSS",value:function(t,e){document.querySelector("#telechart-css-".concat(t))||document.querySelector("head").appendChild(this.parseHTML('<style id="telechart-css-'.concat(t,'" type="text/css">').concat(e,"</style>")))}},{key:"generateAttributesSelector",value:function(t){var e="";return this.loopCollection(t,function(t,n){e+="[".concat(n,'="').concat(t,'"]')}),e}},{key:"generateRandomCSSHexColor",value:function(){return"#".concat(Math.floor(16777215*Math.random()).toString("16"))}},{key:"measureText",value:function(t,e){h.font=e||h.font;var n=Number(h.font.match(/\d+/)[0]),o=h.measureText(t).width;return v.vec2(o,n)}},{key:"normalizeChartData",value:function(e){var n=this,o={};return t.loopCollection(e.columns,function(t,r){var i="string"==typeof t[0]?t.shift():0===r?"x":"y".concat(r-1),a=e.types[i],u=e.names[i],s=e.colors[i];switch(a){case"x":o.time=n.processTimeRawData(t);break;default:o.series=o.series||{},o.series[i]={id:i,name:u,type:a,color:s,points:t}}}),o}},{key:"processTimeRawData",value:function(e){var n,o,r=null;return t.loopCollection(e,function(t,i){0==i?n=t:i==e.length-1&&(o=t),null===r&&i>0&&(r=t-e[i-1])}),{beginTime:n,finishTime:o,accuracy:r}}}],(n=null)&&f(e.prototype,n),o&&f(e,o),t}();p(y,"aggregation",u),p(y,"EventProxy",s),p(y,"DataKeeper",l);var d=y;function m(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var v=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,o=[{key:"vec2",value:function(t,e){return{x:t=t||0,y:e=e||0}}},{key:"point",value:function(t,e){return{x:t=t||0,y:e=e||0,valueOf:function(){return this.y}}}},{key:"rect",value:function(t,e,n,o){return{x:t=t||0,y:e=e||0,w:n=n||0,h:o=o||0}}},{key:"translateRect",value:function(t,e,n,o){return t.x=e.x+n,t.y=e.y+o,t.w=e.w,t.h=e.h,t}},{key:"pointBelongsToRect",value:function(t,e){return t.x>=e.x&&t.x<=e.x+e.w&&t.y>=e.y&&t.y<=e.y+e.h}},{key:"rectBelongsToRect",value:function(t,e){return t.x>=e.x&&t.y>=e.y&&t.x+t.w<=e.x+e.w&&t.y+t.h<=e.y+e.h}},{key:"rectIntersectsRect",value:function(t,e){return!(e.x>t.x+t.w||e.x+e.w<t.x||e.y>t.y+e.h||e.y+e.h<t.y)}},{key:"getExtremum",value:function(t){return{min:Math.min.apply(Math,t),max:Math.max.apply(Math,t)}}},{key:"getDistance",value:function(t,e){return Math.sqrt(Math.pow(Math.abs(t.x-e.x),2)+Math.pow(Math.abs(t.y-e.y),2))}}],(n=null)&&m(e.prototype,n),o&&m(e,o),t}();function b(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var g=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,o=[{key:"addTask",value:function(e){var n=d.generateRandomString("task",16);return this.$tasks=this.$tasks||{},this.$tasks[n]=e,this.removeTask.bind(t,n)}},{key:"removeTask",value:function(t){delete this.$tasks[t]}},{key:"init",value:function(){this.$state={prevFrameTime:+new Date},this.tick=this.tick.bind(this)}},{key:"start",value:function(){this.stop(),this.init(),this.tick()}},{key:"stop",value:function(){window.cancelAnimationFrame(this.$rafId)}},{key:"tick",value:function(){this.$rafId=window.requestAnimationFrame(this.tick);var t=+new Date,e=t-this.$state.prevFrameTime,n=e/(1e3/60);this.$state.prevFrameTime=t,d.loopCollection(this.$tasks,function(t,o){t(n,e)})}}],(n=null)&&b(e.prototype,n),o&&b(e,o),t}();function $(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var w=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,o=[{key:"on",value:function(e,n){var o=d.generateRandomString(e,16);return this.$subscriptions=this.$subscriptions||{},this.$subscriptions[e]=this.$subscriptions[e]||{},this.$subscriptions[e][o]=n,this.off.bind(t,e,o)}},{key:"emit",value:function(t,e){this.$subscriptions&&this.$subscriptions[t]&&d.loopCollection(this.$subscriptions[t],function(t){t(e)})}},{key:"off",value:function(t,e){this.$subscriptions&&this.$subscriptions[t]&&this.$subscriptions[t][e]&&delete this.$subscriptions[t][e]}}],(n=null)&&$(e.prototype,n),o&&$(e,o),t}();function O(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function k(t,e,n){return e&&O(t.prototype,e),n&&O(t,n),t}var j=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.UUID=d.generateRandomString(this.constructor.name,32)}return k(t,[{key:"domComponent",get:function(){if(this.$modules)return this.$modules.domComponent||null}},{key:"domElement",get:function(){if(this.domComponent)return this.domComponent.domElement}}]),k(t,[{key:"on",value:function(t,e){w.on("".concat(this.UUID,"/").concat(t),e)}},{key:"emit",value:function(t,e){w.emit("".concat(this.UUID,"/").concat(t),e)}}]),t}();function P(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var x=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};P(x,"DPR",window.devicePixelRatio),P(x,"assets",{html:{},css:{}}),P(x,"isTouchDevice","ontouchstart"in window),P(x,"values",{domDoubletapTimeout:250,plotLineChunkSize:10});var E=x;function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var R,z,M,L=function(t){function e(t){var n,o,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,r=D(e).call(this),(n=!r||"object"!==S(r)&&"function"!=typeof r?_(o):r).$state={normalizedEventData:{prevPanDistance:null},domElement:t.domElement,eventsList:t.eventsList},d.loopCollection(t.eventsList,function(t,o){e.eventDetectors[t].call(_(n),n.$state.domElement,function(t){n.emit(t.type,t),n.emit("$event",{type:t.type,payload:t})})}),n}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(e,j),n=e,(o=[{key:"$normalizeEventData",value:function(t,e){return e.isGesture=!1,e instanceof window.TouchEvent?this.$state.normalizedEventData=this.$normalizeTouchEventData(t,e):(this.$state.normalizedEventData.x=e.offsetX*window.devicePixelRatio,this.$state.normalizedEventData.y=e.offsetY*window.devicePixelRatio,this.$state.normalizedEventData.pageX=e.pageX*window.devicePixelRatio,this.$state.normalizedEventData.pageY=e.pageY*window.devicePixelRatio),this.$state.normalizedEventData.type=t,this.$state.normalizedEventData}},{key:"$normalizeTouchEventData",value:function(t,e){return e.touches.length>1?this.$state.normalizedEventData=this.$normalizeTouchGestureEventData(t,e):1===e.touches.length?this.$state.normalizedEventData=this.$normalizeEventData(t,e.touches[0]):console.log(1),this.$state.normalizedEventData}},{key:"$normalizeTouchGestureEventData",value:function(t,e){if(this.$state.normalizedEventData.isGesture=!0,this.$state.normalizedEventData.touchesCount=e.touches.length,2==e.touches.length){var n=v.getDistance(v.point(e.touches[0].pageX,e.touches[0].pageY),v.point(e.touches[1].pageX,e.touches[1].pageY));this.$state.normalizedEventData.panDistance=n}return this.$state.normalizedEventData}}])&&C(n.prototype,o),r&&C(n,r),e}();M={click:function(t,e){var n=this;t.addEventListener("click",function(t){e(n.$normalizeEventData("click",t))})},drag:function(t,e){var n,o,r,i=this,a=0,u=0,s=0,c=0,l=!1;E.isTouchDevice?(n="touchstart",o="touchend",r="touchmove"):(n="mousedown",o="mouseup",r="mousemove"),t.addEventListener(n,function(t){t=i.$normalizeEventData("drag",t),a=t.pageX,u=t.pageY,l=!0}),window.addEventListener(o,function(t){l=!1}),window.addEventListener(r,function(t){l&&(t.preventDefault(),t=i.$normalizeEventData("drag",t),s=t.pageX-a,c=t.pageY-u,a=t.pageX,u=t.pageY,t.dragX=s,t.dragY=c,e(t))},{passive:!1})},pan:function(t,e){var n=this;if(E.isTouchDevice){var o=!1,r=0;t.addEventListener("touchstart",function(t){o=!0}),window.addEventListener("touchend",function(t){o=!1,r=0}),window.addEventListener("touchmove",function(t){var i=n.$normalizeEventData("pan",t);if(o&&i.isGesture&&2==i.touchesCount){var a=r/i.panDistance;r=i.panDistance,i.panDelta=a,e(i)}},{cancelable:!0})}},zoom:function(t,e){var n=this;E.isTouchDevice||t.addEventListener("mousewheel",function(t){t.preventDefault();var o=t.wheelDeltaY>0;(t=n.$normalizeEventData("zoom",t)).zoomIn=o,e(t)},{passive:!1})},doubletap:function(t,e){var n=this,o=0;t.addEventListener("click",function(t){t.preventDefault();var r=+new Date;r-o<E.values.domDoubletapTimeout&&e(n.$normalizeEventData("doubletap",t)),o=r})}},(z="eventDetectors")in(R=L)?Object.defineProperty(R,z,{value:M,enumerable:!0,configurable:!0,writable:!0}):R[z]=M;var A=L;function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){return!e||"object"!==U(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function N(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function B(t,e,n){return e&&N(t.prototype,e),n&&N(t,n),t}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Y=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=V(this,I(e).call(this))).$refs={},n.$dom={},n.$children=[],n.$state={template:t.template,eventHandlers:[]};var o=E.assets.html[t.template];return n.$dom.element=n.$buildTemplate(o),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}(e,j),B(e,[{key:"domElement",get:function(){return this.$dom.element}}]),B(e,[{key:"ref",value:function(t){return this.$refs[t]}},{key:"addChild",value:function(t,e){this.$refs[t].appendChild(e)}},{key:"$buildTemplate",value:function(t){var e=this,n=d.parseHTML(t);return this.$traverseDOM(n,function(t,n){e.$processAttrs(t,n)},null),n}},{key:"$traverseDOM",value:function(t,e,n){var o=this;e(t,n),d.loopCollection(t.children,function(t,r){o.$traverseDOM(t,e,n)})}},{key:"$processAttrs",value:function(t,e){var n=this;d.loopCollection(t.attributes,function(e,o){switch(!0){case"$ref"==e.name:n.$refs[e.value]=t,t.$ref=e.value;break;case"$css"==e.name:d.loopCollection(e.value.split(" "),function(t,e){d.injectCSS(t,E.assets.css[t])});break;case"$events"==e.name:var r=new A({domElement:t,eventsList:e.value.split(" ")});r.on("$event",function(e){var o=t.$ref||"";n.emit("".concat(o,".").concat(e.type),e.payload)}),n.$state.eventHandlers.push(r)}})}}]),e}();function X(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function F(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function G(t,e,n){return e&&F(t.prototype,e),n&&F(t,n),t}function Z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var q=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Z(this,"parentNode",null),this.children=[],this.UUID=d.generateRandomString("rendering-object-".concat(this.constructor.name),16),this.$data={},this.$params={},this.$styles=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){Z(t,e,n[e])})}return t}({},t.defaultStyles),this.$state={position:v.vec2(0,0),boundRect:v.rect(0,0,0,0),culled:!0,projectionCulled:!0,visible:!0},this.$setupHiddenDOM(),e&&this.setParams(e)}return G(t,[{key:"culled",get:function(){return this.$state.culled},set:function(t){this.$state.culled=t}},{key:"visible",get:function(){return this.$state.visible},set:function(t){this.$state.visible=t}},{key:"projectionCulled",get:function(){return this.$state.projectionCulled},set:function(t){this.$state.projectionCulled=t}},{key:"position",get:function(){return this.$state.position}}]),G(t,[{key:"getBoundRect",value:function(){return this.$state.boundRect}},{key:"$applyStyles",value:function(e){d.assignValues(e,t.defaultStyles),d.assignValues(e,this.$styles)}},{key:"setAttributes",value:function(t){var e=this;d.loopCollection(t,function(t,n){e.$hiddenDOM.setAttribute(n,t)})}},{key:"setParams",value:function(t){var e=this;d.loopCollection(t,function(t,n){"styles"==n?e.setStyles(t):"attributes"==n?e.setAttributes(t):e.$params[n]=void 0!==t?t:e.$params.name})}},{key:"setStyles",value:function(t){d.assignValues(this.$styles,t)}},{key:"addChild",value:function(t){this.children.push(t),t.parentNode=this,this.$hiddenDOM.appendChild(t.$hiddenDOM)}},{key:"removeChild",value:function(t){var e=this;d.loopCollection(this.children,function(n,o){if(t.UUID==n.UUID)return e.$hiddenDOM.removeChild(t.$hiddenDOM),t.parentNode=null,e.children.splice(o,1),!0})}},{key:"cutOff",value:function(){this.parentNode&&this.parentNode.removeChild(this)}},{key:"render",value:function(t,e,n,o){n+=this.$state.position.x,o+=this.$state.position.y,d.loopCollection(this.children,function(r,i){t.isCulled(r,n+r.position.x,o+r.position.y)?t.incrementCulledObjectsCount():r.render(t,e,n,o)})}},{key:"select",value:function(t,e){var n=X(this.$hiddenDOM.querySelectorAll(d.generateAttributesSelector(t)));return d.loopCollection(n,function(t,o){e&&e(t.$renderingObject,o),n[o]=t.$renderingObject}),n}},{key:"$setupHiddenDOM",value:function(){this.$hiddenDOM=document.createElement(this.constructor.name),this.$hiddenDOM.$renderingObject=this,this.$hiddenDOM.setAttribute("type",this.constructor.name)}}]),t}();Z(q,"defaultStyles",{fillStyle:"#000000",strokeStyle:"#000000",lineWidth:1*E.DPR,lineJoin:"bevel",font:"16px sans-serif",globalAlpha:1});var K=q;function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function J(t,e){return!e||"object"!==Q(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tt(t,e,n){return(tt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=et(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function et(t){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nt(t,e){return(nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ot=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=J(this,et(e).call(this,t)),t.points&&n.setPoints(t.points),n}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nt(t,e)}(e,K),n=e,(o=[{key:"setPoints",value:function(t){this.$data.points=t;var e=v.getExtremum(t);this.$state.boundRect.x=t[0].x,this.$state.boundRect.w=t[t.length-1].x-this.$state.boundRect.x,this.$state.boundRect.y=e.min,this.$state.boundRect.h=e.max-e.min}},{key:"render",value:function(t,n,o,r){var i=this.$data.points,a=!1;this.$applyStyles(n),n.beginPath(),d.loopCollection(i,function(e,o){var r=t.toReal(e.x,e.y);a?(n.lineTo(r.x,r.y),o>=i.length-1&&n.moveTo(r.x,r.y)):(a=!0,n.moveTo(r.x,r.y),n.lineTo(r.x,r.y))}),n.closePath(),n.stroke(),tt(et(e.prototype),"render",this).call(this)}}])&&W(n.prototype,o),r&&W(n,r),e}();function rt(t){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function it(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function at(t,e){return!e||"object"!==rt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ut(t,e,n){return(ut="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=st(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function st(t){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ct(t,e){return(ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var lt=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),at(this,st(e).call(this,t))}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ct(t,e)}(e,K),n=e,(o=[{key:"setParams",value:function(t){ut(st(e.prototype),"setParams",this).call(this,t),this.$updateBoundRect()}},{key:"render",value:function(t,e,n,o){n+=this.$state.position.x,o+=this.$state.position.y,this.$applyStyles(e);var r=t.toReal(n,o);e.fillText(this.$params.textContent,r.x,r.y)}},{key:"$updateBoundRect",value:function(){var t=d.measureText(this.$params.textContent,this.$styles.font);this.$state.boundRect.w=t.x,this.$state.boundRect.h=t.y}}])&&it(n.prototype,o),r&&it(n,r),e}();function ft(t){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pt(t,e){return!e||"object"!==ft(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ht(t,e,n){return(ht="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yt(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function yt(t){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function mt(t,e,n){return e&&dt(t.prototype,e),n&&dt(t,n),t}function vt(t,e){return(vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var bt=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),pt(this,yt(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vt(t,e)}(e,K),mt(e,[{key:"radius",get:function(){return this.$params.radius},set:function(t){this.$params.radius=t,this.$updateBoundRect()}}]),mt(e,[{key:"setParams",value:function(t){ht(yt(e.prototype),"setParams",this).call(this,t),this.$updateBoundRect()}},{key:"render",value:function(t,e,n,o){n+=this.$state.position.x,o+=this.$state.position.y,this.$applyStyles(e);var r=t.toReal(n,o);e.beginPath(),e.arc(r.x,r.y,this.$params.radius,0,2*Math.PI,!0),e.closePath(),e.fill(),e.stroke()}},{key:"$updateBoundRect",value:function(){this.$state.boundRect.x=-this.$params.radius,this.$state.boundRect.y=-this.$params.radius,this.$state.boundRect.w=2*this.$params.radius,this.$state.boundRect.h=2*this.$params.radius}}]),e}();function gt(t){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $t(t,e){return!e||"object"!==gt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wt(t){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ot(t,e){return(Ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=$t(this,wt(e).call(this,t))).culled=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ot(t,e)}(e,K),e}();function jt(t){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xt(t,e,n){return(xt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Et(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Et(t){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function St(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ct(t,e,n){return e&&St(t.prototype,e),n&&St(t,n),t}function Dt(t,e){return(Dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Tt=window.devicePixelRatio,Rt=function(t){function e(){var t,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(o=Et(e).call(this))||"object"!==jt(o)&&"function"!=typeof o?Pt(n):o).$modules={canvas:new Y({template:"canvas"}),offscreenCanvas:new Y({template:"canvas"})},t.$dom={canvasElement:t.$modules.canvas.domElement,offscreenCanvasElement:t.$modules.offscreenCanvas.domElement},t.$temp={position:v.vec2(0,0),boundRect:v.rect(0,0,0,0)},t.$state={context2d:t.$dom.canvasElement.getContext("2d"),offscreenContext2d:t.$dom.offscreenCanvasElement.getContext("2d"),size:v.vec2(100,100),position:v.vec2(0,0),scale:v.vec2(1,1),viewportRect:v.rect(0,0,0,0),culledObjectsCount:0,projectionModified:!0,sizeNeedsUpdate:!0},t.$tasks={},t.render=t.render.bind(Pt(t)),t.$updateProjectionState(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dt(t,e)}(e,d.aggregation(j,K)),Ct(e,[{key:"domElement",get:function(){return this.$dom.canvasElement}},{key:"position",get:function(){return this.$state.position}},{key:"scale",get:function(){return this.$state.scale}},{key:"size",get:function(){return this.$state.size}}]),Ct(e,[{key:"setScale",value:function(t,e){this.$state.viewportRect.w=this.$state.size.x*t,this.$state.viewportRect.h=this.$state.size.y*e,this.$updateProjectionState()}},{key:"setPosition",value:function(t,e){this.$state.position.x=t,this.$state.position.y=e,this.$updateProjectionState()}},{key:"setViewport",value:function(t,e,n,o){var r=this.$state.viewportRect;r.x=t,r.y=e,r.w=n,r.h=o,this.$updateProjectionState()}},{key:"setSize",value:function(t,e){t*=Tt,e*=Tt,this.$dom.canvasElement.width=t,this.$dom.canvasElement.height=e,this.$dom.offscreenCanvasElement.width=t,this.$dom.offscreenCanvasElement.height=e,this.$state.size.x=t,this.$state.size.y=e,this.$updateProjectionState()}},{key:"fitSize",value:function(){if(this.domElement.parentElement){var t=this.domElement.parentElement.getBoundingClientRect();this.setSize(t.width,t.height),this.$state.sizeNeedsUpdate=!1}}},{key:"prerender",value:function(){this.fitSize(),this.$state.projectionModified=!1,this.$state.culledObjectsCount=0,xt(Et(e.prototype),"render",this).call(this,this,this.$state.offscreenContext2d,-this.$state.position.x,-this.$state.position.y)}},{key:"render",value:function(){this.$state.context2d.clearRect(0,0,this.$state.size.x,this.$state.size.y),this.$state.offscreenContext2d.clearRect(0,0,this.$state.size.x,this.$state.size.y),this.prerender(),this.$state.context2d.drawImage(this.$dom.offscreenCanvasElement,0,0)}},{key:"toReal",value:function(t,e){var n=this.$temp.position;return n.x=(t-this.position.x)/this.scale.x,n.y=this.size.y-(e-this.position.y)/this.scale.y,n}},{key:"toVirtual",value:function(t,e){var n=this.$temp.position;return n.x=t*this.scale.x+this.position.x,n.y=(this.size.y-e+this.position.y)*this.scale.y,n}},{key:"toVirtualScale",value:function(t,e){var n=this.$temp.position;return n.x=t*this.scale.x,n.y=e*this.scale.y,n}},{key:"isCulled",value:function(t,e,n){if(!t.visible)return!0;if(t.culled){var o=t.getBoundRect(),r=v.translateRect(this.$temp.boundRect,o,e,n);return t.projectionCulled=!v.rectIntersectsRect(r,this.$state.viewportRect),t.projectionCulled}return!1}},{key:"$updateProjectionState",value:function(){var t=this.$state.viewportRect;this.$state.scale.x=t.w/this.$state.size.x,this.$state.scale.y=t.h/this.$state.size.y,t.x=this.$state.position.x,t.y=this.$state.position.y,this.$state.projectionModified=!0}},{key:"incrementCulledObjectsCount",value:function(){this.$state.culledObjectsCount++}}]),e}();_t(Rt,"RenderingObject",K),_t(Rt,"Line",ot),_t(Rt,"Text",lt),_t(Rt,"Circle",bt),_t(Rt,"Group",kt),_t(Rt,"DOMLayer",K);var zt=Rt;function Mt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Lt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,o=[{key:"tween",value:function(t){var e=this,n=t.fromValue,o=t.toValue,r=t.duration,i=t.ease||"easeInOutQuad",a=this.$easingFunctions[i],u=t.onUpdate||function(){},s=+new Date,c=g.addTask(function(t){var i=(+new Date-s)/r,l=e.$getValue(n,o,i,a);i>=1&&c(),u(l,i>=1)});return c}},{key:"$getValue",value:function(t,e,n,o){return t+(e-t)*o(n)}}],(n=null)&&Mt(e.prototype,n),o&&Mt(e,o),t}();!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Lt,"$easingFunctions",{linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1}});var At=Lt;function Ut(t){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vt(t){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function It(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Bt(t,e,n){return e&&Nt(t.prototype,e),n&&Nt(t,n),t}function Ht(t,e){return(Ht=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yt=function(t){function e(){var t,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(t=!(o=Vt(e).call(this))||"object"!==Ut(o)&&"function"!=typeof o?It(n):o).$temp={},t.$modules={renderingEngine:new zt,domComponent:new Y({template:"plot"})},t.$modules.domComponentEventProxy=new d.EventProxy(t.$modules.domComponent,It(t),["dom.drag","dom.zoom","dom.click","dom.doubletap","dom.pan"],"plot."),t.__runDebugCode(),t.$modules.domComponent.addChild("canvas-wrapper",t.$modules.renderingEngine.domElement),t.startRendering(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ht(t,e)}(e,j),Bt(e,[{key:"position",get:function(){return this.$modules.renderingEngine.position}},{key:"scale",get:function(){return this.$modules.renderingEngine.scale}}]),Bt(e,[{key:"setDataset",value:function(t){console.log(t)}},{key:"startRendering",value:function(){this.stopRendering(),this.stopRendering=g.addTask(this.$modules.renderingEngine.render)}},{key:"stopRendering",value:function(){}},{key:"setExtremum",value:function(t){}},{key:"fitSize",value:function(){var t;return(t=this.$modules.renderingEngine).fitSize.apply(t,arguments)}},{key:"setPosition",value:function(){var t;return(t=this.$modules.renderingEngine).setPosition.apply(t,arguments)}},{key:"setScale",value:function(){var t;return(t=this.$modules.renderingEngine).setScale.apply(t,arguments)}},{key:"setScalePriority",value:function(){var t;return(t=this.$modules.renderingEngine).setScalePriority.apply(t,arguments)}},{key:"toVirtual",value:function(){var t;return(t=this.$modules.renderingEngine).toVirtual.apply(t,arguments)}},{key:"toVirtualScale",value:function(){var t;return(t=this.$modules.renderingEngine).toVirtualScale.apply(t,arguments)}},{key:"__runDebugCode",value:function(){this.$modules.renderingEngine.setViewport(0,10,45,30);var t=new zt.Group({attributes:{content:"series"}}),e=[];d.loop(0,2e4,1,!0,function(t){e.push(30*Math.random())}),d.loop(0,2e3,1,!0,function(n){for(var o=[],r=10*n;r<=10*n+10;r++){var i=e[r];o.push(v.point(r,i))}var a=new zt.Line({styles:{lineWidth:3,strokeStyle:d.generateRandomCSSHexColor()},attributes:{index:n},points:o});t.addChild(a)}),this.$modules.renderingEngine.addChild(t)}},{key:"__addCircle",value:function(t,e){var n=new zt.Circle({radius:1,lineWidth:1,styles:{strokeStyle:d.generateRandomCSSHexColor(),fillStyle:"#ffffff"}});n.position.x=t,n.position.y=e,At.tween({fromValue:10,toValue:30,duration:250,onUpdate:function(t,e){n.radius=t}}),this.$modules.renderingEngine.addChild(n)}},{key:"__addText",value:function(t,e,n){var o=new zt.Text({textContent:n,styles:{fillStyle:"#000000",font:"30px Monospace"},attributes:{bar:Math.random()>.5?"1":""}});o.position.x=t,o.position.y=e,this.$modules.renderingEngine.addChild(o)}}]),e}();function Xt(t){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ft(t,e){return!e||"object"!==Xt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gt(t){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function qt(t,e,n){return e&&Zt(t.prototype,e),n&&Zt(t,n),t}function Kt(t,e){return(Kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Wt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ft(this,Gt(e).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kt(t,e)}(e,j),qt(e,null,[{key:"loadAssets",value:function(){var t=n(0);t.keys().forEach(function(e){var n=t(e),o=e.replace(".html","").replace("./","");E.assets.html[o]=n});var e=n(4);e.keys().forEach(function(t){var n=e(t),o=t.replace(".css","").replace("./","");E.assets.css[o]=n})}}]),qt(e,[{key:"init",value:function(t){t.telechart;var e=t.majorPlot,n=t.panoramaPlot;this.$temp={},this.$modules={majorPlot:e,panoramaPlot:n,domComponent:new Y({template:"telechart"})},this.$dom={rootElement:this.$modules.domComponent.domElement},this.$modules.majorPlotDOMEventHandler=new A({domElement:e.domElement,eventsList:["click","drag","zoom","doubletap","pan"]}),e.on("plot.dom.pan",this.$onMajorPlotPan.bind(this)),e.on("plot.dom.drag",this.$onMajorPlotDrag.bind(this)),e.on("plot.dom.zoom",this.$onMajorPlotZoom.bind(this)),e.on("plot.dom.doubletap",this.$onMajorPlotClick.bind(this)),this.$modules.domComponent.addChild("major-plot-wrapper",e.domElement),this.$modules.domComponent.addChild("panorama-plot-wrapper",n.domElement),this.fitSize=this.fitSize.bind(this),window.addEventListener("resize",this.fitSize)}},{key:"fitSize",value:function(){this.$modules.majorPlot.fitSize(),this.$modules.panoramaPlot.fitSize()}},{key:"$onMajorPlotDrag",value:function(t){var e=this.$modules.majorPlot.position,n=this.$modules.majorPlot.toVirtualScale(t.dragX,t.dragY);this.$modules.majorPlot.setPosition(e.x-n.x,e.y)}},{key:"$onMajorPlotClick",value:function(t){var e=this.$modules.majorPlot.toVirtual(t.x,t.y);this.$modules.majorPlot.__addCircle(e.x,e.y)}},{key:"$onMajorPlotZoom",value:function(t){var e=this,n=this.$modules.majorPlot.scale,o=n.x,r=o*(t.zoomIn?.5:2);this.$temp.killZoomTween&&this.$temp.killZoomTween(),this.$temp.killZoomTween=At.tween({duration:100,fromValue:o,toValue:r,ease:"linear",onUpdate:function(t,o){e.$modules.majorPlot.setScale(t,n.y),o&&delete e.$temp.killZoomTween}})}},{key:"$onMajorPlotPan",value:function(t){var e=this.$modules.majorPlot.scale,n=e.x*(t.panDelta||1);this.$modules.majorPlot.setScale(n,e.y)}}]),e}();Qt(Wt,"Component",Y),Qt(Wt,"assets",{html:{},css:{}}),Wt.loadAssets();var Jt=Wt;var te=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};function ee(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var ne=function(){function t(e,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.$state=new d.DataKeeper({beginTime:0,finishTime:0,accuracy:1,originalAccuracy:1}),this.$content=new d.DataKeeper,this.$setSeriesData(n,o)}var e,n,o;return e=t,(n=[{key:"$setSeriesData",value:function(t,e){var n=this.$state.beginTime=e.beginTime,o=this.$state.finishTime=e.finishTime,r=this.$state.accuracy=this.$state.originalAccuracy=e.accuracy,i=[];d.loop(n,o,r,!1,function(e,n){i.push(v.point(e,t.points[n]))}),this.$content[r]=i}},{key:"getLayer",value:function(t){return t=t||this.$state.originalAccuracy,this.$content[t]||null}},{key:"slice",value:function(t,e,n){return n=n||this.$state.originalAccuracy,t=(t-this.$state.beginTime)/n,e=(e-this.$state.beginTime)/n,this.getLayer(n).slice(t,e)}},{key:"getExtremum",value:function(t,e,n){var o=this.slice(t,e,n);return v.getExtremum(o)}}])&&ee(e.prototype,n),o&&ee(e,o),t}();function oe(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function re(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ie=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$content=new d.DataKeeper}var e,n,o;return e=t,(n=[{key:"importDataset",value:function(t){var e=this;d.loopCollection(t.series,function(n,o){e.$content[o]=new ne(o,n,t.time)}),console.log(t)}},{key:"getExtremum",value:function(t,e,n){var o=[];return d.loopCollection(this.$content,function(r,i){var a=r.getExtremum(t,e,n);o.push(a.min,a.max)}),v.getExtremum(o)}}])&&oe(e.prototype,n),o&&oe(e,o),t}();re(ie,"Dataset",te),re(ie,"Series",ne);var ae=ie;function ue(t){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function se(t){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ce(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function le(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function fe(t,e,n){return e&&le(t.prototype,e),n&&le(t,n),t}function pe(t,e){return(pe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function he(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ye=function(t){function e(){var t,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,t=!(o=se(e).call(this))||"object"!==ue(o)&&"function"!=typeof o?ce(n):o,he(ce(t),"MainLoop",g),he(ce(t),"Utils",d),he(ce(t),"EventBus",w),he(ce(t),"ChartMath",v),t.$modules={storage:new ae,majorPlot:new Yt,panoramaPlot:new Yt,domDriver:new Jt},t.$modules.domDriver.init({telechart:ce(t),panoramaPlot:t.$modules.panoramaPlot,majorPlot:t.$modules.majorPlot}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pe(t,e)}(e,j),fe(e,[{key:"domElement",get:function(){return this.$modules.domDriver.domElement}}]),fe(e,[{key:"update",value:function(t){var e=[];d.loopCollection(t,function(t,n){var o=d.normalizeChartData(t);e.push(o)}),console.log(e),this.$modules.storage.importDataset(e[0]),this.$modules.majorPlot.setDataset(e[0]),this.$modules.panoramaPlot.setDataset(e[0])}},{key:"addLine",value:function(t){}},{key:"removeLine",value:function(t){}},{key:"dispose",value:function(){}},{key:"setParentElement",value:function(t){t.appendChild(this.domElement)}}]),e}();he(ye,"MainLoop",g),he(ye,"Utils",d),he(ye,"EventBus",w),he(ye,"Tweener",At),he(ye,"ChartMath",v),g.start();e.default=ye}])},"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Telechart=e():t.Telechart=e();