/* @sanyabeast | 2019 */
var e,t;e=window,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e,t,n){var r={"./canvas-element.html":1,"./chart-control-series-button.html":2,"./chart-control.html":3,"./frame-control.html":4,"./plot.html":5,"./selected-position-circle.html":6,"./telechart.html":7};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=0},function(e,t){e.exports='<canvas class="telechart-canvas fit-width fit-height"></canvas>'},function(e,t){e.exports='<div \r\n\tclass="series-button flex-row flex-a-center button"\r\n\t$ref="series-button"\r\n\t$events="click"\r\n>\r\n\t\t<div \r\n\t\t\tclass="checkbox-wrapper border-box pos-relative"\r\n\t\t\t$ref="checkbox-wrapper"\r\n\t\t>\r\n\t\t\t<div class="box box-a pos-absolute"></div>\r\n\t\t\t<div class="box box-b pos-absolute"></div>\r\n\t\t</div>\r\n\t\t<p \r\n\t\t\tclass="caption"\r\n\t\t\t$ref="caption"\r\n\t\t></p>\r\n</div>'},function(e,t){e.exports='<div\r\n\tclass="chart-controls fit-width fit-height"\r\n\t$ref="chart-controls"\r\n>\r\n\t\t<div\r\n\t\t\tclass="series-buttons fit-width fit-height flex-row"\r\n\t\t\t$ref="series-buttons"\r\n\t\t>\r\n\t\t\t\r\n\t\t</div>\r\n</div>'},function(e,t){e.exports='<div \r\n\tclass="frame-control pos-absolute fit-height border-box fit-width flex-row"\r\n\t$ref="frame-control"\r\n>\r\n\t\t<div\r\n\t\t\tclass="filler left-filler fit-height pos-absolute"\r\n\t\t\t$ref="frame-control.filler.left"\r\n\t\t></div>\r\n\t\t\r\n\t\t<div\r\n\t\t\tclass="frame fit-height flex-no-shrink pos-absolute border-box"\r\n\t\t\t$ref="frame-control.frame"\r\n\t\t\t$events="drag"\r\n\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass="plane left-plane fit-height flex-no-shrink pos-absolute"\r\n\t\t\t\t\t$ref="frame-control.left-plane"\r\n\t\t\t\t\t$events="drag"\r\n\t\t\t\t></div>\r\n\t\t\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass="plane right-plane fit-height flex-no-shrink pos-absolute"\r\n\t\t\t\t\t$ref="frame-control.right-plane"\r\n\t\t\t\t\t$events="drag"\r\n\t\t\t\t></div>\r\n\t\t</div>\r\n\t\r\n\t\t<div\r\n\t\t\tclass="filler right-filler fit-height pos-absolute"\r\n\t\t\t$ref="frame-control.filler.right"\r\n\t></div>\r\n</div>'},function(e,t){e.exports='<div \r\n\tclass="telechart-plot pos-relative fit-width fit-height overflow-hidden"\r\n\t$events="drag zoom click doubletap pan"\r\n\t$ref="dom"\r\n\tdata-plot-type="{{ params.plotType }}"\r\n>\r\n\t<div \r\n\t\tclass="canvas-wrapper pos-absolute fit-width fit-height"\r\n\t\t$ref="canvas-wrapper"\r\n\t></div>\r\n\t<div \r\n\t\tclass="dom-layer pos-absolute fit-width fit-height overflow-hidden"\r\n\t\t$ref="dom-layer"\r\n\t></div>\r\n</div>'},function(e,t){e.exports='<div \r\n\tclass="selected-position-circle pos-absolute"\r\n>\r\n\t<div \r\n\t\tclass="inner"\r\n\t\t$ref="inner"\r\n\t></div>\r\n</div>'},function(e,t){e.exports='<div \r\n\tclass="telechart flex-column fit-width fit-height border-box"\r\n\t$ref="telechart"\r\n\t$css="modifiers telechart">\r\n\t\t<div class="header caption flex-row flex-a-center flex-no-shrink">\r\n\t\t\t<p class="font-w-bold">Folowers</p>\r\n\t\t</div>\r\n\t\t<div \r\n\t\t\tclass="major-plot-wrapper fit-width pos-relative flex-grow flex-stretch-content"\r\n\t\t\t$ref="major-plot-wrapper">\r\n\t\t</div>\r\n\t\t<div \r\n\t\t\tclass="panorama-plot-wrapper fit-width pos-relative"\r\n\t\t\t$ref="panorama-plot-wrapper">\r\n\t\t</div>\r\n\t\t<div \r\n\t\t\tclass="chart-controls-wrapper flex-row fit-width flex-no-shrink"\r\n\t\t\t$ref="chart-controls-wrapper">\r\n\t\t</div>\r\n\t\t<div \r\n\t\t\tclass="theme-switcher button fit-width flex-row flex-j-center"\r\n\t\t\t$ref="theme-switcher"\r\n\t\t\t$events="click">\r\n\t\t\t\t<p \r\n\t\t\t\t\tclass="font-w-bold"\r\n\t\t\t\t\t$ref="theme-switcher-caption">Switch to Night Mode\r\n\t\t\t\t</p>\r\n\t\t</div>\r\n</div>'},function(e,t,n){var r={"./modifiers.scss":9,"./telechart.scss":10};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=8},function(e,t){e.exports=".flex-row {\n  display: flex;\n  flex-direction: row; }\n\n.flex-column {\n  display: flex;\n  flex-direction: column; }\n\n.flex-j-center {\n  display: flex;\n  justify-content: center; }\n\n.flex-a-center {\n  display: flex;\n  align-items: center; }\n\n.flex-grow {\n  display: flex;\n  flex-grow: 1; }\n\n.flex-no-shrink {\n  display: flex;\n  flex-shrink: 0; }\n\n.flex-shrink {\n  display: flex;\n  flex-shrink: 1; }\n\n.flex-stretch-content {\n  display: flex;\n  align-items: stretch;\n  justify-content: stretch; }\n\n.fit-width {\n  width: 100%; }\n\n.fit-height {\n  height: 100%; }\n\n.border-box {\n  box-sizing: border-box; }\n\n.pos-absolute {\n  position: absolute;\n  left: 0;\n  top: 0; }\n\n.pos-relative {\n  position: relative; }\n\n.font-w-lighter {\n  font-weight: lighter; }\n\n.font-w-normal {\n  font-weight: normal; }\n\n.font-w-bold {\n  font-weight: 400; }\n\n.font-w-bolder {\n  font-weight: bolder; }\n\n.overflow-hidden {\n  overflow: hidden; }\n"},function(e,t){e.exports=".telechart {\n  user-select: none;\n  background-color: var(--telechartBackgroundColor);\n  padding: 16px;\n  -webkit-tap-highlight-color: transparent;\n  /* chart controls */ }\n  .telechart p {\n    margin: 0;\n    font-family: Tahoma, Verdana, Segoe, sans-serif;\n    color: var(--majorTextColor); }\n  .telechart .header.caption {\n    height: 40px; }\n  .telechart .major-plot-wrapper {\n    max-height: 70%; }\n  .telechart .panorama-plot-wrapper {\n    height: 48px;\n    min-height: 48px;\n    background-color: var(--panormaPlotBackground);\n    margin: 16px 0; }\n  .telechart .telechart-plot {\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    right: 0; }\n  .telechart .button {\n    cursor: pointer;\n    user-select: none;\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none; }\n  .telechart .theme-switcher p {\n    color: var(--themeSwitherCaptionColor); }\n  .telechart .frame-control {\n    z-index: 1;\n    flex-wrap: 0; }\n    .telechart .frame-control .filler {\n      background: black;\n      background-color: var(--frameControlBackgroundColor); }\n      .telechart .frame-control .filler.left-filler {\n        left: 0; }\n      .telechart .frame-control .filler.right-filler {\n        right: 0;\n        left: auto; }\n    .telechart .frame-control .frame {\n      width: 1px;\n      border-top: 2px solid var(--frameControlPlaneBackgroundColor);\n      border-bottom: 2px solid var(--frameControlPlaneBackgroundColor);\n      z-index: 1;\n      cursor: move; }\n    .telechart .frame-control .plane {\n      width: 6px;\n      cursor: col-resize;\n      background-color: var(--frameControlPlaneBackgroundColor);\n      border-right: 8px solid transparent;\n      border-left: 8px solid transparent;\n      background-clip: content-box; }\n      .telechart .frame-control .plane.left-plane {\n        left: 0;\n        transform: translateX(-48px);\n        border-left: 48px solid transparent; }\n      .telechart .frame-control .plane.right-plane {\n        right: 0;\n        left: auto;\n        transform: translateX(48px);\n        border-right: 48px solid transparent; }\n  .telechart .selected-position-circle .inner {\n    width: 16px;\n    height: 16px;\n    background: var(--telechartBackgroundColor);\n    transform: translate(-50%, -50%);\n    border-radius: 50%;\n    border: 2px solid var(--borderColor); }\n  .telechart .chart-controls {\n    min-height: 48px;\n    max-height: 64px; }\n    .telechart .chart-controls .series-buttons {\n      align-items: flex-start; }\n      .telechart .chart-controls .series-buttons .series-button {\n        padding: 6px;\n        border-radius: 40px;\n        border: 1px solid var(--seriesButtonBorderColor);\n        margin-right: 16px; }\n        .telechart .chart-controls .series-buttons .series-button .checkbox-wrapper {\n          width: 20px;\n          height: 20px;\n          margin-right: 8px;\n          border-radius: 50%;\n          border-width: 10px;\n          border-style: solid;\n          transition: border-width 0.15s ease-in; }\n          .telechart .chart-controls .series-buttons .series-button .checkbox-wrapper .box {\n            background-color: #fff;\n            height: 2px;\n            width: 6px;\n            border-radius: 4px;\n            transition-property: transform, opacity;\n            transition: 0.25s ease-in;\n            left: 50%;\n            top: 50%;\n            transform-origin: 0 50%; }\n            .telechart .chart-controls .series-buttons .series-button .checkbox-wrapper .box.box-a {\n              transform: rotateZ(225deg) translate(-2px, -3px); }\n            .telechart .chart-controls .series-buttons .series-button .checkbox-wrapper .box.box-b {\n              transform: rotateZ(-45deg) translate(-4px, 2px);\n              width: 10px; }\n        .telechart .chart-controls .series-buttons .series-button p.caption {\n          margin-right: 8px;\n          font-size: 13px; }\n        .telechart .chart-controls .series-buttons .series-button.disabled .checkbox-wrapper {\n          border-width: 1px; }\n          .telechart .chart-controls .series-buttons .series-button.disabled .checkbox-wrapper .box {\n            opacity: 0;\n            width: 2px; }\n"},function(e,t,n){var r={"./frag.default.glsl":12,"./vert.default.glsl":13,"./vert.line2d.glsl":14};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=11},function(e,t){e.exports="precision mediump float;\r\n\r\nuniform vec3 diffuse;\r\n\r\nvoid main(void) {\r\n   gl_FragColor = vec4(diffuse, 1);\r\n}"},function(e,t){e.exports="precision highp float;\r\n\r\nattribute vec2 coords;\r\nuniform vec2 position;\r\n\r\nuniform vec2  worldPosition;\r\nuniform vec2  worldScale;\r\nuniform vec2  viewportSize;\r\n\r\nvec2 translate ( vec2 pos ) {\r\n\tpos += position;\r\n\tpos -= worldPosition;\r\n\treturn( pos );\r\n}\r\n\r\nvec2 project ( vec2 pos ) {\r\n\tpos /= worldScale;\r\n\tpos /= viewportSize;\r\n\treturn( pos );\r\n}\r\n\r\nvoid set ( vec2 pos ) {\r\n\tgl_Position = vec4(pos.xy , 0., 1.0);\r\n}\r\n\r\nvoid main(void) {\r\n   vec2 pos = vec2( coords );\r\n   pos = translate( pos );\r\n   pos = project( pos );\r\n   set( pos );\r\n}"},function(e,t){e.exports="precision highp float;\r\n\r\nattribute vec2 coords;\r\nattribute vec2 normal;\r\n\r\nuniform vec2  position;\r\nuniform float thickness;\r\n\r\nuniform float resolution;\r\nuniform vec2  worldPosition;\r\nuniform vec2  worldScale;\r\nuniform vec2  viewportSize;\r\n\r\nvec2 scaleNormal ( vec2 normal, vec2 scale ) {\r\n   normal /= vec2( scale.y, scale.x );    \r\n   float hypo = length( normal );\r\n   return( vec2( ( normal.x / hypo ), ( normal.y / hypo ) ) );\r\n}\r\n\r\n\r\nvec2 translate( vec2 pos ) {\r\n   pos -= position;\r\n   pos -= worldPosition;\r\n   return( pos );\r\n}\r\n\r\nvec2 project( vec2 pos ) {\r\n   return( pos / worldScale );\r\n}\r\n\r\n\r\nvec2 projectToScreen( vec2 pos ) {\r\n   pos /= viewportSize;\r\n   pos -= 1.;\r\n   return( pos );\r\n}\r\n\r\n\r\nvoid main(void) {\r\n   \tvec2 pos = translate( coords );\r\n      vec2 n = scaleNormal( normal, worldScale );\r\n\r\n   \tpos = project( pos );\r\n\r\n   \tpos += ( n * ( thickness * resolution ) );\r\n\r\n   \tpos = projectToScreen( pos );\r\n\r\n   \tgl_Position = vec4( pos.xy, 0., 1. );\r\n\r\n}"},function(e,t,n){var r={"./day.yml":16,"./night.yml":17};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=15},function(e,t){e.exports={name:"day",default:!0,values:{telechartBackgroundColor:"#ffffff",borderColor:"#000000",majorTextColor:"#000000",panormaPlotBackground:"#f5f9fb",themeSwitherCaptionColor:"#108be3",frameControlBackgroundColor:"#edf4f8d6",frameControlPlaneBackgroundColor:"#0000001f",seriesButtonBorderColor:"#0000001f"}}},function(e,t){e.exports={name:"night",values:{telechartBackgroundColor:"#242f3e",borderColor:"#ffffff",majorTextColor:"#ffffff",panormaPlotBackground:"#1f2a38",themeSwitherCaptionColor:"#36a8f1",frameControlBackgroundColor:"#1f2a38cc",frameControlPlaneBackgroundColor:"#40566bcc",seriesButtonBorderColor:"#40566bcc"}}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t);var s=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];var l=function(t){function s(){var e,t,a,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var c=arguments.length,f=new Array(c),p=0;p<c;p++)f[p]=arguments[p];return a=this,l=(e=o(s)).call.apply(e,[this].concat(f)),t=!l||"object"!==r(l)&&"function"!=typeof l?i(a):l,n.forEach(function(e){u(i(t),new e)}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e),s}(),u=function(e,t){Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t)).forEach(function(n){if(!n.match(/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length|\$name|\$prototype|\$\$id|extend|\$constructor)$/))try{Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}catch(e){$clog(e)}})};return n.forEach(function(e){u(l.prototype,e.prototype),u(l,e)}),l};function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"uniformType","uniform2fv"),c(this,"x",0),c(this,"y",0),this.array=[0,0],this.set(t,n)}var t,n,r;return t=e,(n=[{key:"set",value:function(e,t){if("object"==l(e))return this.set(e.x,e.y);this.array[0]=e,this.array[1]=t,this.x=e,this.y=t}},{key:"valueOf",value:function(){return this.y}},{key:"toArray",value:function(){return this.array}},{key:"fromArray",value:function(e){this.set(e[0],e[1])}}])&&u(t.prototype,n),r&&u(t,r),e}();function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"x",0),h(this,"y",0),h(this,"w",0),h(this,"h",0),this.set(t,n,r,o)}var t,n,r;return t=e,(n=[{key:"set",value:function(e,t,n,r){this.x=e,this.y=t,this.w=n,this.h=r}}])&&p(t.prototype,n),r&&p(t,r),e}();function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return d(this,(e=b(t)).call.apply(e,[this].concat(r)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,f),t}();function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var S=function(e){function t(){var e,n,r,o,i,a,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return r=this,n=!(o=(e=x(t)).call.apply(e,[this].concat(u)))||"object"!==w(o)&&"function"!=typeof o?k(r):o,i=k(n),s="uniform3fv",(a="uniformType")in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,f),n=t,(r=[{key:"set",value:function(e,t,n){return"object"==w(e)?this.set(e.x,e.y):"string"==typeof e?this.setCSSHex(e):(this.array[0]=e,this.array[1]=t,this.array[2]=n,this.x=e,this.y=t,void(this.z=n))}},{key:"valueOf",value:function(){return this.toArray()}},{key:"toArray",value:function(){return this.array}},{key:"fromArray",value:function(e){this.set(e[0],e[1],e[2])}},{key:"setCSSHex",value:function(e){if(this.$cssHexString!=e){this.$cssHexString=e;var t=U.cssHexToRGB(e);this.set(t.r,t.g,t.b)}}}])&&$(n.prototype,r),o&&$(n,o),t}();function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.set(t,n)}var t,n,r;return t=e,(n=[{key:"set",value:function(e,t){if("object"==P(e))return this.set(e.min,e.max);this.min=e,this.max=t}},{key:"size",get:function(){return this.max-this.min}},{key:"isFinite",get:function(){return isFinite(this.min)&&isFinite(this.max)}}])&&j(t.prototype,n),r&&j(t,r),e}();function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),T(this,"uniformType","uniform1f"),T(this,"isSimple",!0),this.set(t)}var t,n,r;return t=e,(n=[{key:"valueOf",value:function(){return this.value}},{key:"set",value:function(e){this.value=e}}])&&C(t.prototype,n),r&&C(t,r),e}();function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"float32",value:function(e){return new _(e)}},{key:"vec2",value:function(e,t){return new g(e,t)}},{key:"color",value:function(e,t,n){return new S(e,t,n)}},{key:"point",value:function(e,t){return new f(e,t)}},{key:"range",value:function(e,t){return new E(e,t)}},{key:"rect",value:function(e,t,n,r){return new m(e,t,n,r)}},{key:"getExtremum",value:function(e){return this.range(Math.min.apply(Math,e),Math.max.apply(Math,e))}},{key:"nearestMult",value:function(e,t,n,r){return(n?Math.ceil((e+(r?0:1))/t)*t:Math.floor((e-(r?0:1))/t)*t)||0}},{key:"getOrder",value:function(e){return e<0?Math.pow(10,1/Math.floor(1/Math.log10(e))):Math.pow(10,Math.floor(Math.log10(e)))}},{key:"smoothstep",value:function(e,t,n){return t+(e-t)*n}},{key:"getStep",value:function(e,t,n){return(t-n)/(t-e)}},{key:"vec2add",value:function(e,t,n){return e.x=t.x+n.x,e.y=t.y+n.y,e}},{key:"vec2normalize",value:function(e,t){var n=t.x,r=t.y,o=n*n+r*r;return o>0&&(o=1/Math.sqrt(o),e.x=t.x*o,e.y=t.y*o),e}},{key:"vec2subtract",value:function(e,t,n){return e.x=t.x-n.x,e.y=t.y-n.y,e}},{key:"vec2dot",value:function(e,t){return e.x*t.x+e.y*t.y}},{key:"vec2magnitude",value:function(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}},{key:"vec2set",value:function(e,t,n){return e.x=t,e.y=n,e}},{key:"vec2normal",value:function(e,t,n){return n?this.vec2set(e,t.y,-t.x):this.vec2set(e,-t.y,t.x),e}},{key:"vec2direction",value:function(e,t,n){return this.vec2subtract(e,t,n),this.vec2normalize(e,e),e}}],(n=null)&&D(t.prototype,n),r&&D(t,r),e}();function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setMultiple(t)}var t,n,r;return t=e,(n=[{key:"setMultiple",value:function(e){var t=this;U.loopCollection(e,function(e,n){t[n]=e})}},{key:"set",value:function(e,t,n){if("object"==z(e)&&void 0===t)return this.setMultiple(e);"function"==typeof t&&n?U.defineProperty(this,e,{get:t}):this[e]=t}}])&&A(t.prototype,n),r&&A(t,r),e}();function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}document.createElement("canvas").getContext("2d");var B=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"loopCollection",value:function(e,t){if(e)if(Array.isArray(e)||"number"==typeof e.length)for(var n=0,r=e.length;n<r&&!t(e[n],n,e);n++);else for(var o in e)if(t(e[o],o,e))break}},{key:"loop",value:function(e,t,n,r,o){if(r)for(var i=e,a=0;i<t&&!o(i,a);i+=n)a++;else for(i=e,a=0;i<=t&&!o(i,a);i+=n)a++}},{key:"generateRandomString",value:function(e,t){for(var n="";n.length<t;)n+=Math.random().toString(32).substring(3,12);return n=n.substring(0,t),"".concat(e,"-").concat(n)}},{key:"assignValues",value:function(e,t){this.loopCollection(t,function(t,n){e[n]=t})}},{key:"parseHTML",value:function(e){var t=document.createElement("div");return t.innerHTML=e,t.children[0]}},{key:"injectCSS",value:function(e,t){document.querySelector("#telechart-css-".concat(e))?document.querySelector("#telechart-css-".concat(e)).textContent=t:document.querySelector("head").appendChild(this.parseHTML('<style id="telechart-css-'.concat(e,'" type="text/css">').concat(t,"</style>")))}},{key:"generateVarsCSS",value:function(e){var t="";return this.loopCollection(e,function(e,n){t+="--".concat(n,":").concat(e,";\n")}),t=".telechart {".concat(t,"}")}},{key:"generateAttributesSelector",value:function(e){var t="";return this.loopCollection(e,function(e,n){t+="[".concat(n,'="').concat(e,'"]')}),t}},{key:"defineProperty",value:function(e,t,n){Object.defineProperty(e,t,n)}},{key:"proxyMethods",value:function(e,t,n){this.loopCollection(n,function(n,r){e[n]=function(){return t[n].apply(t,arguments)}})}},{key:"proxyProps",value:function(e,t,n){var r=this;this.loopCollection(n,function(n,o){r.defineProperty(e,n,{get:function(){return t[n]},set:function(e){t[n]=e},configurable:!0})})}},{key:"generateRandomCSSHexColor",value:function(){return"#".concat(Math.floor(16777215*Math.random()).toString("16"))}},{key:"cssHexToRGB",value:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16)/255,g:parseInt(t[2],16)/255,b:parseInt(t[3],16)/255}:null}},{key:"stringTemplate",value:function(e,t){var n=e;return t&&this.loopCollection(t,function(e,t){var r=new RegExp("[$]{".concat(t,"}"),"gm");r.test(n)&&(n=n.replace(r,e))}),n}}],(n=null)&&V(t.prototype,n),r&&V(t,r),e}();F(B,"aggregation",s),F(B,"DataKeeper",M);var U=B;function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"addTask",value:function(t){var n=U.generateRandomString("task",16);return this.$tasks=this.$tasks||{},this.$tasks[n]=t,this.removeTask.bind(e,n)}},{key:"removeTask",value:function(e){delete this.$tasks[e]}},{key:"init",value:function(){this.$state={prevFrameTime:+new Date},this.tick=this.tick.bind(this)}},{key:"start",value:function(){this.stop(),this.init(),this.tick()}},{key:"stop",value:function(){window.cancelAnimationFrame(this.$rafId)}},{key:"tick",value:function(){this.$rafId=window.requestAnimationFrame(this.tick);var e=+new Date,t=e-this.$state.prevFrameTime,n=t/(1e3/60);this.$state.prevFrameTime=e,U.loopCollection(this.$tasks,function(e,r){e(n,t)})}}],(n=null)&&L(t.prototype,n),r&&L(t,r),e}();function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var N=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"on",value:function(t,n){var r=U.generateRandomString(t,16);return this.$subscriptions=this.$subscriptions||{},this.$subscriptions[t]=this.$subscriptions[t]||{},this.$subscriptions[t][r]=n,this.off.bind(e,t,r)}},{key:"emit",value:function(e,t){this.$subscriptions&&this.$subscriptions[e]&&U.loopCollection(this.$subscriptions[e],function(e){e(t)})}},{key:"off",value:function(e,t){this.$subscriptions&&this.$subscriptions[e]&&this.$subscriptions[e][t]&&delete this.$subscriptions[e][t]}}],(n=null)&&Y(t.prototype,n),r&&Y(t,r),e}();function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),e}var K=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.UUID=U.generateRandomString(this.constructor.name,32),this.$state=new U.DataKeeper,this.$modules=new U.DataKeeper,this.$temp=new U.DataKeeper}return H(e,[{key:"domComponent",get:function(){if(this.$modules)return this.$modules.domComponent||null}},{key:"domElement",get:function(){if(this.domComponent)return this.domComponent.domElement}}]),H(e,[{key:"on",value:function(e,t){N.on("".concat(this.UUID,"/").concat(e),t)}},{key:"emit",value:function(e,t){N.emit("".concat(this.UUID,"/").concat(e),t)}}]),e}();function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};G(q,"activeSkin",null),G(q,"plotChunkSize",15),G(q,"DPR",window.devicePixelRatio),G(q,"assets",{html:{},css:{},skins:{},shaders:{}}),G(q,"isTouchDevice","ontouchstart"in window),G(q,"values",{domDoubletapTimeout:250,plotLineDefaultLineWidth:2,plotExtremumTweenDuration:150,plotSeriesVisibilityTweenDuration:150,plotExtremumPadding:.35,plotSelectedPositionCircleRadius:10}),G(q,"skinValues",{});var Q=q;function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Z=function(){function e(t){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o="",(r="cssText")in(n=this)?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this.$name=t.name,this.$values=new U.DataKeeper(t.values),this.$updateCSS()}var t,n,r;return t=e,(n=[{key:"$updateCSS",value:function(){this.cssText=U.generateVarsCSS(this.$values)}},{key:"apply",value:function(){U.injectCSS("telechart-skin-vars",this.cssText),console.log("skin ".concat(this.$name," applied"))}}])&&W(t.prototype,n),r&&W(t,r),e}();function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oe,ie,ae,se=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=te(t).call(this),(n=!o||"object"!==J(o)&&"function"!=typeof o?ne(r):o).$state={normalizedEventData:{prevPanDistance:null},domElement:e.domElement,eventsList:e.eventsList},U.loopCollection(e.eventsList,function(e,r){t.eventDetectors[e].call(ne(n),n.$state.domElement,function(e){n.emit(e.type,e),n.emit("$event",{type:e.type,payload:e})})}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,K),n=t,(r=[{key:"$normalizeEventData",value:function(e,t,n){var r=n.getBoundingClientRect(),o=t,i=this.$state.normalizedEventData;return i.isGesture=!1,t instanceof window.TouchEvent?i=this.$normalizeTouchEventData(e,t,n):(i.x=(o.pageX-r.x)*Q.DPR,i.y=(o.pageX-r.y)*Q.DPR,i.pageX=o.pageX*Q.DPR,i.pageY=o.pageY*Q.DPR),i.type=e,i.target=n,this.$state.normalizedEventData}},{key:"$normalizeTouchEventData",value:function(e,t,n){return t.touches.length>1?this.$state.normalizedEventData=this.$normalizeTouchGestureEventData(e,t):1===t.touches.length?this.$state.normalizedEventData=this.$normalizeEventData(e,t.touches[0],n):console.log(1),this.$state.normalizedEventData}},{key:"$normalizeTouchGestureEventData",value:function(e,t){if(this.$state.normalizedEventData.isGesture=!0,this.$state.normalizedEventData.touchesCount=t.touches.length,2==t.touches.length){var n=R.getDistance(R.point(t.touches[0].pageX,t.touches[0].pageY),R.point(t.touches[1].pageX,t.touches[1].pageY));this.$state.normalizedEventData.panDistance=n}return this.$state.normalizedEventData}}])&&ee(n.prototype,r),o&&ee(n,o),t}();ae={click:function(e,t){var n=this;e.addEventListener("click",function(r){t(n.$normalizeEventData("click",r,e))})},drag:function(e,t){var n,r,o,i=this,a=0,s=0,l=0,u=0,c=!1;Q.isTouchDevice?(n="touchstart",r="touchend",o="touchmove"):(n="mousedown",r="mouseup",o="mousemove"),e.addEventListener(n,function(t){t.stopPropagation(),t=i.$normalizeEventData("drag",t,e),a=t.pageX,s=t.pageY,c=!0}),window.addEventListener(r,function(e){c=!1}),window.addEventListener(o,function(n){c&&(n.stopPropagation(),n.preventDefault(),n=i.$normalizeEventData("drag",n,e),l=n.pageX-a,u=n.pageY-s,a=n.pageX,s=n.pageY,n.dragX=l,n.dragY=u,t(n))},{passive:!1})},pan:function(e,t){var n=this;if(Q.isTouchDevice){var r=!1,o=0;e.addEventListener("touchstart",function(e){r=!0}),window.addEventListener("touchend",function(e){r=!1,o=0}),window.addEventListener("touchmove",function(i){var a=n.$normalizeEventData("pan",i,e);if(r&&a.isGesture&&2==a.touchesCount){var s=o/a.panDistance;o=a.panDistance,a.panDelta=s,t(a)}},{cancelable:!0})}},zoom:function(e,t){var n=this;Q.isTouchDevice||e.addEventListener("mousewheel",function(r){r.preventDefault();var o=r.wheelDeltaY>0;(r=n.$normalizeEventData("zoom",r,e)).zoomIn=o,t(r)},{passive:!1})},doubletap:function(e,t){var n=this,r=0;e.addEventListener("click",function(o){o.preventDefault();var i=+new Date;i-r<Q.values.domDoubletapTimeout&&t(n.$normalizeEventData("doubletap",o,e)),r=i})}},(ie="eventDetectors")in(oe=se)?Object.defineProperty(oe,ie,{value:ae,enumerable:!0,configurable:!0,writable:!0}):oe[ie]=ae;var le=se;function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t,n){return t&&pe(e.prototype,t),n&&pe(e,n),e}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ye=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ce(this,fe(t).call(this))).$refs={},n.$dom={},n.$children=[],n.$state={template:e.template,eventHandlers:[]};var r=Q.assets.html[e.template];return n.$dom.element=n.$buildTemplate(r,e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(t,K),he(t,[{key:"domElement",get:function(){return this.$dom.element}},{key:"classList",get:function(){return this.domElement.classList}}]),he(t,[{key:"ref",value:function(e){return this.$refs[e]}},{key:"addChild",value:function(e,t){this.$refs[e].appendChild(t)}},{key:"$buildTemplate",value:function(e,t){var n=this,r=U.parseHTML(e,t);return this.$traverseDOM(r,function(e,r){n.$processAttrs(e,r,t)},null),r}},{key:"$traverseDOM",value:function(e,t,n){var r=this;t(e,n),U.loopCollection(e.children,function(e,n){r.$traverseDOM(e,t,e.parentNode)})}},{key:"$processAttrs",value:function(e,t,n){var r=this;U.loopCollection(e.attributes,function(t,n){switch(t.name){case"$ref":r.$refs[t.value]=e,e.$ref=t.value;break;case"$css":U.loopCollection(t.value.split(" "),function(e,t){U.injectCSS(e,Q.assets.css[e])});break;case"$events":var o=new le({domElement:e,eventsList:t.value.split(" ")});o.on("$event",function(t){var n=e.$ref||"";r.emit("".concat(n,".").concat(t.type),t.payload)}),r.$state.eventHandlers.push(o)}})}}]),t}();function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t,n){return t&&de(e.prototype,t),n&&de(e,n),e}var ve=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.vertices=t.vertices,this.buffer=t.buffer}return be(e,null,[{key:"setValue",value:function(e,t,n){for(var r=n*t,o=arguments.length,i=new Array(o>3?o-3:0),a=3;a<o;a++)i[a-3]=arguments[a];U.loopCollection(i,function(t,n){e[r+n]=t})}}]),be(e,[{key:"setValue",value:function(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];e.setValue.apply(e,[this.vertices,t].concat(o))}}]),e}();function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t,n){return t&&ge(e.prototype,t),n&&ge(e,n),e}var $e=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$state=new U.DataKeeper({geometryInited:!1,indicesInitialized:!1}),this.$temp=new U.DataKeeper,this.attributes=new U.DataKeeper,t&&t.attributes&&this.setAttributesData(t.attributes)}return we(e,[{key:"geometryInited",get:function(){return this.$state.geometryInited}},{key:"indicesCount",get:function(){return this.$state.indices.length}}]),we(e,[{key:"setAttributesData",value:function(e){this.$state.attributesData=e}},{key:"init",value:function(e,t,n){var r=this;this.$state.geometryInited=!0,U.loopCollection(this.$state.attributesData,function(n,o){r.$addAttribute(e,t,o,n)}),this.$state.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.$state.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.$state.indices),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}},{key:"$addAttribute",value:function(e,t,n,r){this.$state.indicesInitialized||this.$generateIndices(r.length/2),this.attributes[n]=new ve({vertices:r,buffer:t.createBuffer()}),t.bindBuffer(t.ARRAY_BUFFER,this.attributes[n].buffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null)}},{key:"$generateIndices",value:function(e){var t=[];U.loop(0,e,1,!0,function(e){t[e]=e}),this.$state.indicesInitialized=!0,this.$state.indices=t}},{key:"bind",value:function(e,t,n){var r=this;U.loopCollection(this.attributes,function(e,o){var i=e.buffer;t.bindBuffer(t.ARRAY_BUFFER,i),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.$state.indexBuffer);var a=t.getAttribLocation(n,o);a>-1&&(t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a))})}}]),e}();function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ke=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gl=n,this.name=t,this.shaderProgram=this.shaderProgram,this.type=o.uniformType,this.value=o,this.$state=new U.DataKeeper({loc:n.getUniformLocation(r,t)})}var t,n,r;return t=e,(n=[{key:"update",value:function(){this.value.isSimple?this.gl[this.type](this.$state.loc,this.value.valueOf()):this.gl[this.type](this.$state.loc,this.value.toArray())}}])&&xe(t.prototype,n),r&&xe(t,r),e}();function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t,n){return t&&Oe(e.prototype,t),n&&Oe(e,n),e}var Pe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$state=new U.DataKeeper({uniformsData:t.uniforms,materialInited:!1,uniformsInited:!1,vertexShaderCode:Q.assets.shaders[t.vertexShader],fragmentShaderCode:Q.assets.shaders[t.fragmentShader]}),this.uniforms=new U.DataKeeper}return Se(e,[{key:"materialInited",get:function(){return this.$state.materialInited}},{key:"program",get:function(){return this.$state.shaderProgram}}]),Se(e,[{key:"init",value:function(e,t){this.$state.materialInited=!0,this.$state.fragmentShader=this.$compileShader(e,t,"fragment",this.$state.fragmentShaderCode),this.$state.vertexShader=this.$compileShader(e,t,"vertex",this.$state.vertexShaderCode);var n=this.$state.shaderProgram=t.createProgram();t.attachShader(n,this.$state.vertexShader),t.attachShader(n,this.$state.fragmentShader),this.$linkProgram(t),this.$initUniforms(e,t)}},{key:"$compileShader",value:function(e,t,n,r){var o=t.createShader("vertex"==n?t.VERTEX_SHADER:t.FRAGMENT_SHADER);return t.shaderSource(o,r),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS)||console.log("Shader compilation failed: ".concat(t.getShaderInfoLog(o)," ")),o}},{key:"$initUniforms",value:function(e,t){this.addMultipleUniforms(t,this.$state.uniformsData),this.addMultipleUniforms(t,{position:R.vec2(0,0),worldPosition:R.vec2(0,0),worldScale:R.vec2(0,0),viewportSize:R.vec2(0,0),resolution:R.float32(1)})}},{key:"$linkProgram",value:function(e){e.linkProgram(this.$state.shaderProgram)}},{key:"addMultipleUniforms",value:function(e,t){var n=this;U.loopCollection(t,function(t,r){n.addUniform(r,e,n.$state.shaderProgram,t)})}},{key:"addUniform",value:function(e,t,n,r){this.uniforms[e]=new ke(e,t,n,r)}},{key:"updateUniforms",value:function(e){var t=this;e&&U.loopCollection(e,function(e,n){t.uniforms[n].value.set(e)}),U.loopCollection(this.uniforms,function(e,t){e.update()})}}]),e}();function je(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Te=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ce(this,"parentNode",null),this.children=[],this.UUID=U.generateRandomString("rendering-object-".concat(this.constructor.name),16),this.$data={},this.$temp={},this.$params={},this.$state={position:R.vec2(0,0),boundRect:R.rect(0,0,0,0),culled:!0,projectionCulled:!0,visible:!0},this.$setupHiddenDOM(),t&&(this.defaultParams?this.setParams(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ce(e,t,n[t])})}return e}({},this.defaultParams,{params:t})):this.setParams(t)),U.proxyProps(this,this.$state,["culled","projectionCulled","position","visible"])}var t,n,r;return t=e,(n=[{key:"getBoundRect",value:function(){return this.$state.boundRect}},{key:"setAttributes",value:function(e){var t=this;U.loopCollection(e,function(e,n){t.$hiddenDOM.setAttribute(n,e)})}},{key:"setStyles",value:function(e){}},{key:"setParams",value:function(e){var t=this;U.loopCollection(e,function(e,n){"styles"==n?t.setStyles(e):"attributes"==n?t.setAttributes(e):t.$params[n]=void 0!==e?e:t.$params.name})}},{key:"addChild",value:function(e){this.children.push(e),e.parentNode=this,this.$hiddenDOM.appendChild(e.$hiddenDOM)}},{key:"removeChild",value:function(e){var t=this;U.loopCollection(this.children,function(n,r){if(e.UUID==n.UUID)return t.$hiddenDOM.removeChild(e.$hiddenDOM),e.parentNode=null,t.children.splice(r,1),!0})}},{key:"render",value:function(e,t,n,r,o){n+=this.$state.position.x,r+=this.$state.position.y,U.loopCollection(this.children,function(i,a){i.visible&&i.render(e,t,n,r,o)})}},{key:"select",value:function(e,t){var n=je(this.$hiddenDOM.querySelectorAll(U.generateAttributesSelector(e)));return U.loopCollection(n,function(e,r){t&&t(e.$renderingObject,r),n[r]=e.$renderingObject}),n}},{key:"$setupHiddenDOM",value:function(){this.$hiddenDOM=document.createElement(this.constructor.name),this.$hiddenDOM.$renderingObject=this,this.$hiddenDOM.setAttribute("type",this.constructor.name)}}])&&Ee(t.prototype,n),r&&Ee(t,r),e}();function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ze(e,t,n){return(ze="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ae(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ve=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=Ae(t).call(this,e))||"object"!==_e(o)&&"function"!=typeof o?Re(r):o,U.proxyProps(Re(n),n.$params,["material","geometry"]),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(t,Te),n=t,(r=[{key:"render",value:function(e,n,r,o,i){ze(Ae(t.prototype),"render",this).call(this,e,n,r,o,i);var a=this.material.uniforms;r+=this.position.x,o+=this.position.y,this.material.materialInited||this.material.init(e,n),this.geometry.geometryInited||this.geometry.init(e,n,this.material.program),n.useProgram(this.material.program),this.geometry.bind(e,n,this.material.program),a.position.value.set(r,o),this.material.updateUniforms({worldPosition:e.worldPosition,worldScale:e.worldScale,viewportSize:e.size,resolution:Q.DPR}),n.drawElements(n.TRIANGLES,this.geometry.indicesCount,n.UNSIGNED_SHORT,0)}}])&&De(n.prototype,r),o&&De(n,o),t}();function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ue(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ye(e,t,n){return t&&Ie(e.prototype,t),n&&Ie(e,n),e}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ue(this,Le(t).call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Be(e,t,n[t])})}return e}({scale:R.vec2(1,1),size:R.vec2(1,1),applyScaleX:!1,applyScaleY:!1,applySizeX:!1,applySizeY:!1,applyPosX:!0,applyPosY:!0},e)))).$temp={prevEngine:null,prevGl:null,prevPx:0,prevPy:0},n.$state.culled=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}(t,Te),Ye(t,[{key:"scale",get:function(){return this.$params.scale}},{key:"size",get:function(){return this.$params.size}},{key:"soloRenderingAvailable",get:function(){return!!this.$temp.prevEngine}}]),Ye(t,[{key:"setStyles",value:function(e,t){U.assignValues((t||this.$params.domElement).style,e)}},{key:"setStyle",value:function(e,t){this.$params.domElement.style[e]=t}},{key:"render",value:function(e,t,n,r){if(!e){if(!this.soloRenderingAvailable)return;e=this.$temp.prevEngine,t=this.$temp.prevGl,n=this.$temp.prevPx,r=this.$temp.prevPy}var o=Q.DPR;this.$temp.prevEngine=e,this.$temp.prevGl=t,this.$temp.prevPx=n,this.$temp.prevPy=r,n+=this.$state.position.x,r+=this.$state.position.y;var i=e.toReal(n,r),a=e.toRealScale(this.$params.scale.x,this.$params.scale.y),s=e.toRealScale(this.$params.size.x,this.$params.size.y),l=this.$params.applyScaleX,u=this.$params.applyScaleY,c=this.$params.applySizeX,f=this.$params.applySizeY,p=this.$params.applyPosX,h=this.$params.applyPosY;this.$params.domElement.style.transform=this.setStyle("transform","translate(".concat(p?i.x/o:0,"px, ").concat(h?i.y/o:0,"px) scale(").concat(l?a.x/o:1,", ").concat(u?a.y/o:1,")")),c&&this.setStyle("width","".concat(s.x/o,"px")),f&&this.setStyle("height","".concat(s.y/o,"px"))}}]),t}();function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qe=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ke(this,Ge(t).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(t,Te),t}();function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var nt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Je(this,et(t).call(this,e))).$temp.setMultiple({direction:R.vec2(0,0),negNormal:R.vec2(0,0),posNormal:R.vec2(0,0)}),e.points&&n.setAttributesData(n.$generateLineGeometry(e.points)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}(t,$e),n=t,(r=[{key:"$generateLineGeometry",value:function(e){var t=this,n=[],r=[],o=0,i=ve.setValue;return U.loopCollection(e,function(a,s){var l=s<e.length-2?e[s+1]:e[s-1],u=R.vec2direction(t.$temp.direction,a,l),c=R.vec2normal(t.$temp.negNormal,u,!1),f=R.vec2normal(t.$temp.posNormal,u,!0);i(n,2,o,a.x,a.y),i(r,2,o++,c.x,c.y),i(n,2,o,l.x,l.y),i(r,2,o++,c.x,c.y),i(n,2,o,a.x,a.y),i(r,2,o++,f.x,f.y),i(n,2,o,a.x,a.y),i(r,2,o++,f.x,f.y),i(n,2,o,l.x,l.y),i(r,2,o++,c.x,c.y),i(n,2,o,l.x,l.y),i(r,2,o++,f.x,f.y)}),{coords:n,normal:r}}}])&&Ze(n.prototype,r),o&&Ze(n,o),t}();function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function it(e,t){return!t||"object"!==rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function st(e,t){return(st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var lt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=it(this,at(t).call(this,e))).$params.material=new Pe({fragmentShader:"frag.default",vertexShader:"vert.line2d",uniforms:e.uniforms}),e.points&&n.setPoints(e.points),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&st(e,t)}(t,Ve),n=t,(r=[{key:"setPoints",value:function(e){this.$data.points=e;var t=R.getExtremum(e);this.$state.boundRect.set(e[0].x,t.min,e[e.length-1].x-this.$state.boundRect.x,t.size),this.geometry=new nt({points:e})}}])&&ot(n.prototype,r),o&&ot(n,o),t}();function ut(e){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ft(e,t,n){return(ft="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mt(e,t,n){return t&&ht(e.prototype,t),n&&ht(e,n),e}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bt=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(r=pt(t).call(this))||"object"!==ut(r)&&"function"!=typeof r?ct(n):r).$modules={canvas:new ye({template:"canvas-element"})},e.$dom={canvasElement:e.$modules.canvas.domElement},e.$state={gl:e.$dom.canvasElement.getContext("webgl"),size:R.vec2(1,1),position:R.vec2(0,0),scale:R.vec2(1,1),viewport:R.rect(0,0,1,1),worldPosition:R.vec2(0,0),worldScale:R.vec2(1,1),projectionModified:!0,sizeNeedsUpdate:!0},U.proxyProps(ct(e),e.$state,["position","scale","viewport","size","worldScale","worldPosition"]),e.render=e.render.bind(ct(e)),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(t,U.aggregation(K,Te)),mt(t,[{key:"domElement",get:function(){return this.$dom.canvasElement}}]),mt(t,[{key:"setSize",value:function(e,t){e*=Q.DPR,t*=Q.DPR,this.$state.size.x===e&&this.$state.size.y===t||e&&t&&(this.$dom.canvasElement.width=e,this.$dom.canvasElement.height=t,this.$state.size.set(e,t),this.$state.gl.viewport(0,0,e,t),this.updateProjection())}},{key:"setScale",value:function(e,t){this.$state.viewport.w=this.$state.size.x*e,this.$state.viewport.h=this.$state.size.y*t,this.updateProjection()}},{key:"setPosition",value:function(e,t){t="number"==typeof t?t:this.$state.position.y,this.$state.position.set(e,t),this.updateProjection()}},{key:"setViewport",value:function(e,t,n,r){var o=this.$state.viewport;o.set(e,t,n,r),this.$state.position.set(o.x,o.y),this.emit("viewport.updated",o),this.updateProjection()}},{key:"fitSize",value:function(){if(this.domElement.parentNode){var e=this.domElement.parentElement.getBoundingClientRect();this.setSize(e.width,e.height)}}},{key:"updateProjection",value:function(){var e=this.$state.viewport,t=this.$state.position,n=this.$state.worldPosition,r=this.$state.worldScale,o=this.$state.size,i=this.$state.scale;i.set(e.w/o.x,e.h/o.y),e.x=t.x,e.y=t.y,n.set(e.x,e.y),r.set(i.x/2,i.y/2),this.$state.projectionModified=!0}},{key:"toReal",value:function(e,t){return R.point((e-this.position.x)/this.scale.x|0,this.size.y-(t-this.position.y)/this.scale.y|0)}},{key:"toRealScale",value:function(e,t){return R.point(e/this.scale.x|0,t/this.scale.y|0)}},{key:"toVirtual",value:function(e,t){return R.point(e*this.scale.x+this.position.x,(this.size.y-t)*this.scale.y+this.position.y)}},{key:"toVirtualScale",value:function(e,t){return R.point(e*this.scale.x,t*this.scale.y)}},{key:"render",value:function(e){this.fitSize(),(this.$state.projectionModified||!0===e)&&(this.$state.projectionModified=!1,ft(pt(t.prototype),"render",this).call(this,this,this.$state.gl,-this.$state.position.x,-this.$state.position.y,1))}},{key:"updateValue",value:function(e){this.value=e||this.value}}]),t}();dt(bt,"Geometry",$e),dt(bt,"Material",Pe),dt(bt,"Mesh",Ve),dt(bt,"RenderingObject",Te),dt(bt,"Uniform",ke),dt(bt,"DOMElement",Xe),dt(bt,"Group",Qe),dt(bt,"Line",lt);var vt=bt;function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var wt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"tween",value:function(e){var t=this,n=e.fromValue,r=e.toValue,o=e.duration,i=e.ease||"easeInOutQuad",a=this.$easingFunctions[i],s=e.onUpdate||function(){},l=+new Date,u=I.addTask(function(e){var i=(+new Date-l)/o,c=t.$getValue(n,r,i,a);i>=1&&u(),s(c,i>=1)});return u}},{key:"$getValue",value:function(e,t,n,r){return e+(t-e)*r(n)}}],(n=null)&&gt(t.prototype,n),r&&gt(t,r),e}();!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(wt,"$easingFunctions",{linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInBack:function(e){return e*e*(3.5*e-2.5)},easeOutBack:function(e){return--e*e*(3.5*e+2.5)+1}});var $t=wt;function xt(e){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ot(e,t,n[t])})}return e}function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function St(e){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Et(e,t,n){return t&&jt(e.prototype,t),n&&jt(e,n),e}function Ct(e,t){return(Ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tt=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=St(t).call(this))||"object"!==xt(o)&&"function"!=typeof o?Pt(r):o).$state.set({extremum:R.range(0,0),series:new U.DataKeeper}),n.$modules.set({renderingEngine:new vt,domComponent:new ye(kt({template:"plot"},e))}),U.proxyMethods(Pt(n),n.$modules.renderingEngine,["toVirtual","toVirtualScale","setViewport","fitSize","setPosition","setScale"]),n.$modules.domComponent.addChild("canvas-wrapper",n.$modules.renderingEngine.domElement),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ct(e,t)}(t,K),Et(t,[{key:"position",get:function(){return this.$modules.renderingEngine.position}},{key:"scale",get:function(){return this.$modules.renderingEngine.scale}},{key:"viewport",get:function(){return this.$modules.renderingEngine.viewport}}]),Et(t,[{key:"addSeries",value:function(e){this.$state.beginTime=e.series.beginTime,this.$state.finishTime=e.series.finishTime;var t=new vt.Line({points:e.points,attributes:{"content-type":"series","series-type":e.series.type,"series-name":e.series.name,"series-id":e.series.id},uniforms:{thickness:R.float32(2),diffuse:R.color(e.series.color)}});this.setViewport(e.series.beginTime,e.extremum.min,e.series.finishTime-e.series.beginTime,e.extremum.max-e.extremum.min),this.setPosition(e.series.beginTime),this.$modules.renderingEngine.addChild(t),this.$state.series.set(e.series.id,e)}},{key:"startRendering",value:function(){this.stopRendering(),this.stopRendering=I.addTask(this.$modules.renderingEngine.render)}},{key:"render",value:function(){this.$modules.renderingEngine.render()}},{key:"stopRendering",value:function(){}},{key:"setExtremum",value:function(e,t){var n=this;if(e.isFinite&&(e.min!=this.$state.extremum.min||this.$state.extremum.max!=e.max)){this.$state.extremum.set(e);var r=e.size*Q.values.plotExtremumPadding;e.min-=r,e.max+=r;var o=this.$modules.renderingEngine.viewport,i=this.$modules.renderingEngine.position;t?(this.$temp.killExtremumTweenY&&this.$temp.killExtremumTweenY(),this.$temp.killExtremumTweenY=$t.tween({fromValue:i.y,toValue:e.min,duration:Q.values.plotExtremumTweenDuration,ease:"linear",onUpdate:function(e,t){i.y=e,n.$modules.renderingEngine.updateProjection(),t&&n.$temp.killExtremumTweenY()}}),this.$temp.killExtremumTweenH&&this.$temp.killExtremumTweenH(),this.$temp.killExtremumTweenH=$t.tween({fromValue:o.h,toValue:e.size,duration:Q.values.plotExtremumTweenDuration,ease:"linear",onUpdate:function(e,t){o.h=e,n.$modules.renderingEngine.updateProjection(),t&&n.$temp.killExtremumTweenH()}})):(o.y=e.min,o.h=e.max-e.min)}}},{key:"setSeriesVisibility",value:function(e,t){var n=this;this.$modules.renderingEngine.select({"content-type":"series","series-id":e},function(e){t&&(e.visible=t),$t.tween({fromValue:e.alpha,toValue:t?1:0,duration:Q.values.plotSeriesVisibilityTweenDuration,ease:t?"easeInQuad":"easeOutQuad",onUpdate:function(r,o){e.alpha=r,n.$modules.renderingEngine.updateProjection(),o&&!t&&(e.isVisible=t)}})})}}]),t}();function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rt(e){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function At(e,t){return(At=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mt=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Rt(t).call(this,e))||"object"!==_t(o)&&"function"!=typeof o?zt(r):o).$temp.circlesRenderingObjects={},n.$modules.domComponent.on("dom.drag",n.$onUserDrag.bind(zt(n))),n.$modules.domComponent.on("dom.click",n.$onUserClick.bind(zt(n))),n.$modules.domComponent.on("dom.pan",n.$onUserPan.bind(zt(n))),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&At(e,t)}(t,Tt),n=t,(r=[{key:"$onUserDrag",value:function(e){var t=this.$modules.renderingEngine.toVirtual(e.x,e.y);this.emit("user.position.select",t)}},{key:"$onUserClick",value:function(e){var t=this.$modules.renderingEngine.toVirtual(e.x,e.y);this.emit("user.position.select",t)}},{key:"$onUserPan",value:function(e){if(e.panDelta>0){var t=this.$modules.renderingEngine.scale;this.$modules.renderingEngine.setScale(t.x*e.panDelta,t.y)}}},{key:"setSelectedPositionValues",value:function(e){var t=this;U.loopCollection(this.$temp.circlesRenderingObjects,function(e,t){e.visible=!1}),U.loopCollection(e,function(e,n){var r=t.$temp.circlesRenderingObjects[n];if(!r){var o=new ye({template:"selected-position-circle"});(r=new vt.DOMElement({domElement:o.domElement,domComponent:o,applyScaleY:!1,applyScaleX:!1,applyPosY:!0,applyPosX:!0,test:!0})).setStyles({borderColor:t.$state.series[n].series.color,width:"".concat(Q.values.plotSelectedPositionCircleRadius,"px"),height:"".concat(Q.values.plotSelectedPositionCircleRadius,"px")},o.ref("inner")),t.$modules.domComponent.addChild("dom-layer",o.domElement),t.$modules.renderingEngine.addChild(r),t.$temp.circlesRenderingObjects[n]=r}r.visible=!0,r.position.set(e),r.soloRenderingAvailable?(r.render(),t.$modules.renderingEngine.updateProjection()):t.$modules.renderingEngine.updateProjection()})}}])&&Dt(n.prototype,r),o&&Dt(n,o),t}();function Vt(e){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ut(e,t,n){return(Ut="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lt(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Lt(e){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function It(e,t){return(It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Yt=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Lt(t).call(this,e))||"object"!==Vt(o)&&"function"!=typeof o?Bt(r):o).$state.beginTime=0,n.$state.frameViewportRect=R.rect(0,0,0,0);var i=n.$modules.frameControlComponent=new ye({template:"frame-control"});return n.$modules.domComponent.addChild("dom-layer",n.$modules.frameControlComponent.domElement),i.on("frame-control.left-plane.drag",n.$onFrameControlLeftPlaneDrag.bind(Bt(n))),i.on("frame-control.right-plane.drag",n.$onFrameControlRightPlaneDrag.bind(Bt(n))),i.on("frame-control.frame.drag",n.$onFrameControlFrameDrag.bind(Bt(n))),n.$modules.frameControlsRenderingObject=new vt.DOMElement({domElement:i.ref("frame-control.frame"),applyPosX:!0,applyPosY:!1,applySizeX:!0,applySizeY:!1}),n.$modules.frameControlsLeftFillerRenderingObject=new vt.DOMElement({domElement:i.ref("frame-control.filler.left"),applyPosX:!1,applyPosY:!1,applySizeX:!0,applySizeY:!1}),n.$modules.frameControlsRightFillerRenderingObject=new vt.DOMElement({domElement:i.ref("frame-control.filler.right"),applyPosX:!1,applyPosY:!1,applySizeX:!0,applySizeY:!1}),n.$modules.renderingEngine.addChild(n.$modules.frameControlsRenderingObject),n.$modules.renderingEngine.addChild(n.$modules.frameControlsLeftFillerRenderingObject),n.$modules.renderingEngine.addChild(n.$modules.frameControlsRightFillerRenderingObject),U.proxyProps(Bt(n),n.$state,["frameViewportRect"]),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&It(e,t)}(t,Tt),n=t,(r=[{key:"setFramePosition",value:function(e){var t=this.$modules.frameControlsRenderingObject,n=this.$state.frameViewportRect,r=this.$state.beginTime,o=this.$state.finishTime;e<r&&(e=r),e+n.w>o&&(e=o-n.w),n.x=e,t.position.x=e,t.render(),this.$updateFillers(),this.emit("frame.viewport.changed",n)}},{key:"setFrameSize",value:function(e){var t=this.$modules.frameControlsRenderingObject,n=this.$state.frameViewportRect,r=(this.$state.beginTime,this.$state.finishTime,this.$state.accuracy);e<r&&(e=r),n.x+e>this.$state.finishTime&&(e=this.$state.finishTime-n.x),n.w=e,t.size.x=e,t.render(),this.$updateFillers(),this.emit("frame.viewport.changed",n)}},{key:"$updateFillers",value:function(){var e=this.$modules.frameControlsLeftFillerRenderingObject,t=this.$modules.frameControlsRightFillerRenderingObject,n=this.$state.frameViewportRect,r=this.$state.beginTime,o=this.$state.finishTime;this.$state.accuracy;e.size.x=n.x-r,t.size.x=o-(n.x+n.w),e.render(),t.render()}},{key:"$onFrameControlLeftPlaneDrag",value:function(e){var t=this.$modules.renderingEngine.toVirtualScale(e.dragX,0),n=this.$state.frameViewportRect.x+t.x,r=this.$state.frameViewportRect.w-t.x;r<=this.$state.accuracy&&(r=this.$state.accuracy,n-=t.x),n<=this.$state.beginTime&&(n=this.$state.beginTime,r+=t.x),this.setFramePosition(n),this.setFrameSize(r)}},{key:"$onFrameControlRightPlaneDrag",value:function(e){var t=this.$modules.renderingEngine.toVirtualScale(e.dragX,0);this.setFrameSize(this.$state.frameViewportRect.w+t.x)}},{key:"$onFrameControlFrameDrag",value:function(e){var t=this.$modules.renderingEngine.toVirtualScale(e.dragX,0);this.setFramePosition(this.$state.frameViewportRect.x+t.x)}},{key:"addSeries",value:function(e){Ut(Lt(t.prototype),"addSeries",this).call(this,e),this.setFrameSize((e.series.finishTime-e.series.beginTime)/5),this.setFramePosition(e.series.finishTime)}}])&&Ft(n.prototype,r),o&&Ft(n,o),t}();function Nt(e){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ht(e,t){return!t||"object"!==Nt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kt(e){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gt(e,t){return(Gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qt=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ht(this,Kt(t).call(this))).$temp.seriesButtons=new U.DataKeeper,e.$modules.domComponent=new ye({template:"chart-control"}),e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gt(e,t)}(t,K),n=t,(r=[{key:"addSeriesButton",value:function(e){var t=this,n=e.id,r=new ye({template:"chart-control-series-button"});this.$modules.domComponent.addChild("series-buttons",r.domElement),this.$temp.seriesButtons[n]=r,U.assignValues(r.ref("checkbox-wrapper").style,{borderColor:e.color}),r.ref("caption").textContent=e.name,r.on("series-button.click",function(){t.emit("toggle.series.visibility",e)})}},{key:"removeSeriesButton",value:function(e){}},{key:"setSeriesVisibility",value:function(e,t){t?this.$temp.seriesButtons[e].classList.remove("disabled"):this.$temp.seriesButtons[e].classList.add("disabled")}}])&&Xt(n.prototype,r),o&&Xt(n,o),t}();function Qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Wt=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.$state=new U.DataKeeper({beginTime:0,finishTime:0,accuracy:1,id:n.id,color:n.color,type:n.type,visible:!0}),U.proxyProps(this,this.$state,["accuracy","beginTime","finishTime","id","color","type","visible"]),this.$content=new U.DataKeeper,this.$setSeriesData(n,r)}var t,n,r;return t=e,(n=[{key:"$setSeriesData",value:function(e,t){var n=this.$state.beginTime=t.beginTime,r=this.$state.finishTime=t.finishTime,o=this.$state.accuracy=t.accuracy,i=[];U.loop(n,r,o,!1,function(t,n){i.push(R.point(t,e.points[n]))}),this.$content[o]=i}},{key:"getLayer",value:function(){var e=this.$state.accuracy;return this.$content[e]||null}},{key:"slice",value:function(e,t){var n=this.$state.accuracy;return t+=n,(e-=n)<this.$state.beginTime&&(e=this.$state.beginTime),t>this.$state.finishTime&&(t=this.$state.finishTime),t=R.nearestMult(t,n,!0,!0),e=(e-this.$state.beginTime)/n,t=(t-this.$state.beginTime)/n,this.getLayer(n).slice(e,t)}},{key:"getExtremum",value:function(e,t){var n=this.slice(e,t);return R.getExtremum(n)}},{key:"getValueAt",value:function(e){var t=this.$state.accuracy,n=this.getLayer();e<this.$state.beginTime&&(e=this.$state.beginTime),e>this.$state.finishTime&&(e=this.$state.finishTime);var r=e,o=(r=R.nearestMult(e,t,!1,!0))+t,i=R.getStep(r,o,e);r=(r-this.$state.beginTime)/t,o=(o-this.$state.beginTime)/t;var a=R.smoothstep(n[r],n[o],i);return R.point(e,a)}}])&&Qt(t.prototype,n),r&&Qt(t,r),e}();function Zt(e){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jt(e,t){return!t||"object"!==Zt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function en(e){return(en=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nn(e,t,n){return t&&tn(e.prototype,t),n&&tn(e,n),e}function rn(e,t){return(rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var on=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Jt(this,en(t).call(this))).$state=new U.DataKeeper({beginTime:0,finishTime:0}),e.series=new U.DataKeeper,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rn(e,t)}(t,K),nn(t,null,[{key:"normalizeChartData",value:function(e){var t=this,n={};return U.loopCollection(e.columns,function(r,o){var i="string"==typeof r[0]?r.shift():0===o?"x":"y".concat(o-1),a=e.types[i],s=e.names[i],l=e.colors[i];switch(a){case"x":n.time=t.processTimeRawData(r);break;default:n.series=n.series||{},n.series[i]={id:i,name:s,type:a,color:l,points:r}}}),n}},{key:"processTimeRawData",value:function(e){var t,n,r=null;return U.loopCollection(e,function(o,i){0==i?t=o:i==e.length-1&&(n=o),null===r&&i>0&&(r=o-e[i-1])}),{beginTime:t,finishTime:n,accuracy:r}}}]),nn(t,[{key:"importRawDataset",value:function(e){this.importDataset(t.normalizeChartData(e))}},{key:"importDataset",value:function(e){var t=this;U.loopCollection(e.series,function(n,r){t.series[r]=new Wt(r,n,e.time),t.$state.beginTime=t.series[r].beginTime,t.$state.finishTime=t.series[r].finishTime,t.emit("series.added",t.series[r])})}},{key:"getSeriesPoints",value:function(e){return this.series[e].slice(this.$state.beginTime,this.$state.finishTime)}},{key:"getExtremum",value:function(e,t){var n=[];return U.loopCollection(this.series,function(r,o){if(r.visible){var i=r.getExtremum(e,t);n.push(i.min,i.max)}}),R.getExtremum(n)}},{key:"getValueAt",value:function(e){var t={};return U.loopCollection(this.series,function(n,r){t[r]=n.getValueAt(e)}),t}},{key:"setSeriesVisibility",value:function(e,t){this.series[e].visible=t,this.emit("series.visibility.changed",this.series[e])}},{key:"toggleSeriesVisibility",value:function(e){this.series[e].visible=!this.series[e].visible,this.emit("series.visibility.changed",this.series[e])}}]),t}();function an(e){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sn(e){return(sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ln(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cn(e,t,n){return t&&un(e.prototype,t),n&&un(e,n),e}function fn(e,t){return(fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hn=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,e=!(r=sn(t).call(this))||"object"!==an(r)&&"function"!=typeof r?ln(n):r,pn(ln(e),"Config",Q),pn(ln(e),"Utils",U),e.$state=new U.DataKeeper({renderingPaused:!0}),e.$modules.set({chartControl:new qt,domComponent:new ye({template:"telechart"})}),e.$modules.set({storage:new on,majorPlot:new Mt,panoramaPlot:new Yt}),e.$setupDOM(),e.$setupEvents(),e.startRendering(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fn(e,t)}(t,K),cn(t,null,[{key:"processAsset",value:function(e,t,n,r){e.keys().forEach(function(o){var i=e(o),a=o.replace(".".concat(n),"").replace("./","");Q.assets[t][a]=r?r(i):i})}},{key:"loadAssets",value:function(){this.processAsset(n(0),"html","html"),this.processAsset(n(8),"css","scss"),this.processAsset(n(11),"shaders","glsl"),this.processAsset(n(15),"skins","yml",function(e){return e.default&&(Q.defaultSkin=e.name),new Z(e)})}}]),cn(t,[{key:"update",value:function(e){var t=this;this.$modules.storage.importRawDataset(e[0]),U.loopCollection(this.$modules.storage.series,function(e,n){var r={points:t.$modules.storage.getSeriesPoints(n),series:e,extremum:t.$modules.storage.getExtremum(e.beginTime,e.finishTime)};t.$modules.majorPlot.addSeries(r),t.$modules.panoramaPlot.addSeries(r)})}},{key:"setSkin",value:function(e){e=e||Q.defaultSkin,Q.activeSkin=e,Q.assets.skins[e]&&Q.assets.skins[e].apply()}},{key:"setParentElement",value:function(e){e.appendChild(this.domElement)}},{key:"startRendering",value:function(){this.$state.renderingPaused&&(this.$state.set("renderingPaused",!1),this.$modules.majorPlot.startRendering(),this.$modules.panoramaPlot.startRendering())}},{key:"stopRendering",value:function(){this.$state.renderingPaused||(this.$state.set("renderingPaused",!0),this.$modules.majorPlot.stopRendering(),this.$modules.panoramaPlot.stopRendering())}},{key:"$setupDOM",value:function(){this.$modules.domComponent.addChild("chart-controls-wrapper",this.$modules.chartControl.domElement),this.$modules.domComponent.addChild("major-plot-wrapper",this.$modules.majorPlot.domElement),this.$modules.domComponent.addChild("panorama-plot-wrapper",this.$modules.panoramaPlot.domElement),this.setSkin("night")}},{key:"$setupEvents",value:function(){var e=this;this.$modules.domComponent.on("theme-switcher.click",this.$onThemeSwitcherClick.bind(this)),this.$modules.panoramaPlot.on("frame.viewport.changed",function(t){var n=e.$modules.storage.getExtremum(t.x,t.x+t.w);e.$modules.majorPlot.setViewport(t.x,e.$modules.majorPlot.viewport.y,t.w,e.$modules.majorPlot.viewport.h),e.$modules.majorPlot.setExtremum(n,!0)}),this.$modules.majorPlot.on("user.position.select",function(t){var n=e.$modules.storage.getValueAt(t.x);e.$modules.majorPlot.setSelectedPositionValues(n)}),this.$modules.storage.on("series.visibility.changed",function(t){var n=e.$modules.panoramaPlot.frameViewportRect,r=e.$modules.storage.getExtremum(n.x,n.x+n.w),o=e.$modules.storage.getExtremum(t.beginTime,t.finishTime);e.$modules.chartControl.setSeriesVisibility(t.id,t.visible),e.$modules.majorPlot.setSeriesVisibility(t.id,t.visible),e.$modules.panoramaPlot.setSeriesVisibility(t.id,t.visible),e.$modules.panoramaPlot.setExtremum(o,!0),e.$modules.majorPlot.setExtremum(r,!0)}),this.$modules.storage.on("series.added",function(t){e.$modules.chartControl.addSeriesButton(t)}),this.$modules.chartControl.on("toggle.series.visibility",function(t){e.$modules.storage.toggleSeriesVisibility(t.id)})}},{key:"$onThemeSwitcherClick",value:function(e){"day"==Q.activeSkin?(this.$modules.domComponent.ref("theme-switcher-caption").textContent="Switch to Day Mode",this.setSkin("night")):(this.$modules.domComponent.ref("theme-switcher-caption").textContent="Switch to Night Mode",this.setSkin("day"))}}]),t}();hn.loadAssets(),I.start();t.default=hn}])},"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Telechart=t():e.Telechart=t();